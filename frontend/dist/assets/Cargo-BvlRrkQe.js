import{c as ae,r as x,j as e,L as ne}from"./main-DlP4xrLE.js";import{z as l}from"./index-mSkvzYyn.js";import{A as oe}from"./AdminBar-CopzlQoJ.js";import{F as $}from"./file-CdSSxc74.js";import{C as R}from"./chevron-right-BFVVCxDN.js";import{F as B}from"./folder-CzYiNY45.js";import{A as _}from"./arrow-left-DQ1b-r7_.js";import{a as W,T as z,P as ie}from"./trash-Dxn7BH0w.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],O=ae("Link",ce),le=l.object({hidden:l.boolean().optional(),readonly:l.boolean().optional(),noDelete:l.boolean().optional(),customProperties:l.record(l.any()).optional()});l.object({id:l.string().optional(),name:l.string().min(1).max(255),description:l.string(),hash:l.string().optional(),size:l.number().optional(),mimeType:l.string().optional(),type:l.enum(["local","remote"]),remoteUrl:l.string().url().optional(),properties:le.default({}),createdAt:l.date().optional(),updatedAt:l.date().optional()});l.object({id:l.string().optional(),name:l.string().min(1).max(255),description:l.string(),items:l.array(l.object({cargoId:l.string(),targetPath:l.string().min(1)})).default([]),createdAt:l.date().optional(),updatedAt:l.date().optional()});const T=c=>{if(c<1024)return`${c} B`;const u=c/1024;if(u<1024)return`${u.toFixed(2)} KB`;const g=u/1024;return g<1024?`${g.toFixed(2)} MB`:`${(g/1024).toFixed(2)} GB`},de=({properties:c,onChange:u})=>{const[g,k]=x.useState(""),[P,S]=x.useState(""),F=()=>{g.trim()&&(u({...c,customProperties:{...c.customProperties||{},[g]:P}}),k(""),S(""))},D=n=>{if(!c.customProperties)return;const o={...c.customProperties};delete o[n],u({...c,customProperties:Object.keys(o).length>0?o:void 0})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-xs font-medium text-gray-700",children:"Properties"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:c.hidden||!1,onChange:n=>u({...c,hidden:n.target.checked})}),e.jsx("span",{className:"text-xs",children:"Hidden (not visible to users)"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:c.readonly||!1,onChange:n=>u({...c,readonly:n.target.checked})}),e.jsx("span",{className:"text-xs",children:"Read-only (users cannot modify)"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:c.noDelete||!1,onChange:n=>u({...c,noDelete:n.target.checked})}),e.jsx("span",{className:"text-xs",children:"No Delete (users cannot delete)"})]})]}),e.jsxs("div",{className:"pt-2",children:[e.jsx("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"Custom Properties"}),e.jsxs("div",{className:"space-y-2",children:[c.customProperties&&Object.entries(c.customProperties).map(([n,o])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex-1 text-xs border border-gray-200 rounded-md p-2",children:[e.jsxs("span",{className:"font-medium",children:[n,":"]})," ",JSON.stringify(o)]}),e.jsx("button",{type:"button",onClick:()=>D(n),className:"text-gray-400 hover:text-red-500",children:e.jsx(z,{className:"w-4 h-4"})})]},n)),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:g,onChange:n=>k(n.target.value),className:"flex-1 px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Property name"}),e.jsx("input",{type:"text",value:P,onChange:n=>S(n.target.value),className:"flex-1 px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Property value"}),e.jsx("button",{type:"button",onClick:F,className:"px-2 py-1 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Add"})]})]})]})]})},me=({items:c,onChange:u})=>{const[g,k]=x.useState([]),[P,S]=x.useState(!1),[F,D]=x.useState(null),[n,o]=x.useState(!1),[r,f]=x.useState(""),[d,N]=x.useState("");x.useEffect(()=>{n&&i()},[n]);const i=async()=>{S(!0);try{const m=localStorage.getItem("token"),v=await fetch("/api/cargo",{headers:{Authorization:`Bearer ${m}`}});if(!v.ok)throw new Error("Failed to fetch cargo");const w=await v.json();k(w)}catch(m){D(m instanceof Error?m.message:"An error occurred")}finally{S(!1)}},C=()=>{!r||!d.trim()||(u([...c,{cargoId:r,targetPath:d}]),f(""),N(""),o(!1))},y=m=>{u(c.filter((v,w)=>w!==m))},A=g.filter(m=>!c.some(v=>v.cargoId===m.id));return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-medium text-gray-700",children:"Container Items"}),e.jsxs("button",{type:"button",onClick:()=>o(!n),className:"px-2 py-1 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50 flex items-center",children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),"Add Item"]})]}),F&&e.jsx("div",{className:"bg-red-50 text-red-600 p-2 rounded-md text-xs",children:F}),n&&e.jsxs("div",{className:"border border-gray-200 rounded-md p-3 space-y-3",children:[e.jsx("h4",{className:"text-xs font-medium mb-2",children:"Add cargo to container"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Select Cargo"}),P?e.jsx("div",{className:"text-center py-2",children:e.jsx("span",{className:"text-xs text-gray-500",children:"Loading..."})}):e.jsxs("select",{value:r,onChange:m=>f(m.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",children:[e.jsx("option",{value:"",children:"-- Select cargo --"}),A.map(m=>e.jsxs("option",{value:m.id,children:[m.name," (",m.type==="local"?"Local File":"Remote URL",")"]},m.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Target Path"}),e.jsx("input",{type:"text",value:d,onChange:m=>N(m.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"/path/to/destination"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-2 py-1 text-xs text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),e.jsx("button",{type:"button",onClick:C,disabled:!r||!d.trim(),className:"px-2 py-1 text-xs font-medium text-white bg-gray-900 rounded-md hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add to Container"})]})]}),e.jsx("div",{children:c.length>0?e.jsx("div",{className:"space-y-2",children:c.map((m,v)=>{const w=g.find(j=>j.id===m.cargoId)||{name:"Loading...",type:"local"};return e.jsxs("div",{className:"flex justify-between items-center border border-gray-200 rounded-md p-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"pt-1",children:w.type==="local"?e.jsx($,{className:"w-4 h-4 text-gray-400"}):e.jsx(O,{className:"w-4 h-4 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:w.name}),e.jsxs("div",{className:"text-xs font-mono mt-1",children:["â†’ ",m.targetPath]})]})]}),e.jsx("button",{type:"button",onClick:()=>y(v),className:"text-gray-400 hover:text-red-500",children:e.jsx(z,{className:"w-4 h-4"})})]},v)})}):e.jsx("div",{className:"text-center py-4 border border-gray-200 border-dashed rounded-md",children:e.jsx("p",{className:"text-xs text-gray-500",children:"No items in this container"})})})]})},fe=()=>{const[c,u]=x.useState([]),[g,k]=x.useState([]),[P,S]=x.useState(!0),[F,D]=x.useState(null),[n,o]=x.useState("cargo-list"),[r,f]=x.useState(null),[d,N]=x.useState(null),[i,C]=x.useState({name:"",description:"",type:"local",properties:{},hash:"",size:0,mimeType:""}),[y,A]=x.useState({name:"",description:"",items:[]}),[m,v]=x.useState(null),[w,j]=x.useState(null),[q,J]=x.useState(!1);x.useEffect(()=>{K()},[]);const K=async()=>{S(!0);try{await Promise.all([U(),I()])}catch(s){D(s instanceof Error?s.message:"Failed to fetch data")}finally{S(!1)}},U=async()=>{try{const s=localStorage.getItem("token"),t=await fetch("/api/cargo",{headers:{Authorization:`Bearer ${s}`}});if(!t.ok)throw new Error("Failed to fetch cargo");const a=await t.json();return u(a),a}catch(s){throw console.error("Failed to fetch cargo:",s),u([]),s}},I=async()=>{try{const s=localStorage.getItem("token"),t=await fetch("/api/cargo/container",{headers:{Authorization:`Bearer ${s}`}});if(!t.ok){if(t.status===404)return k([]),[];throw new Error("Failed to fetch containers")}const a=await t.json();return k(a),a}catch(s){throw console.error("Failed to fetch containers:",s),k([]),s}},V=async s=>{s.preventDefault(),j(null);try{if(!m)throw new Error("Please select a file to upload");J(!0);const t=new FormData;t.append("file",m),t.append("data",JSON.stringify({name:i.name,description:i.description,properties:i.properties}));const a=localStorage.getItem("token"),h=await fetch("/api/cargo/upload",{method:"POST",headers:{Authorization:`Bearer ${a}`},body:t});if(!h.ok){const p=await h.json();throw new Error(p.error||"Failed to create cargo")}await U(),o("cargo-list"),E()}catch(t){j(t instanceof Error?t.message:"Failed to create cargo")}finally{J(!1)}},Y=async s=>{s.preventDefault(),j(null);try{if(!i.remoteUrl)throw new Error("Remote URL is required");const t=localStorage.getItem("token"),a=await fetch("/api/cargo/remote",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({name:i.name,description:i.description,remoteUrl:i.remoteUrl,properties:i.properties})});if(!a.ok){const h=await a.json();throw new Error(h.error||"Failed to create remote cargo")}await U(),o("cargo-list"),E()}catch(t){j(t instanceof Error?t.message:"Failed to create remote cargo")}},G=async s=>{if(s.preventDefault(),!!r){j(null);try{const t=localStorage.getItem("token"),a=await fetch(`/api/cargo/${r.id}`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({name:i.name,description:i.description,properties:i.properties})});if(!a.ok){const h=await a.json();throw new Error(h.error||"Failed to update cargo")}await U(),o("cargo-view"),f({...r,name:i.name,description:i.description,properties:i.properties})}catch(t){j(t instanceof Error?t.message:"Failed to update cargo")}}},Q=async s=>{try{const t=g.filter(p=>p.items.some(b=>b.cargoId===s));if(t.length>0){const p=t.map(b=>b.name).join(", ");throw new Error(`Cargo is used in containers: ${p}`)}const a=localStorage.getItem("token"),h=await fetch(`/api/cargo/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}});if(!h.ok){const p=await h.json();throw new Error(p.error||"Failed to delete cargo")}await U(),(r==null?void 0:r.id)===s&&(o("cargo-list"),f(null))}catch(t){D(t instanceof Error?t.message:"Failed to delete cargo")}},X=async s=>{s.preventDefault(),j(null);try{const t=localStorage.getItem("token"),a=await fetch("/api/cargo/container",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(y)});if(!a.ok){const h=await a.json();throw new Error(h.error||"Failed to create container")}await I(),o("container-list"),L()}catch(t){j(t instanceof Error?t.message:"Failed to create container")}},Z=async s=>{if(s.preventDefault(),!!d){j(null);try{const t=localStorage.getItem("token"),a=await fetch(`/api/cargo/container/${d.id}`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(y)});if(!a.ok){const h=await a.json();throw new Error(h.error||"Failed to update container")}await I(),o("container-view"),N({...d,name:y.name,description:y.description,items:y.items})}catch(t){j(t instanceof Error?t.message:"Failed to update container")}}},ee=async s=>{try{const t=localStorage.getItem("token"),a=await fetch(`/api/cargo/container/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(!a.ok){const h=await a.json();throw new Error(h.error||"Failed to delete container")}await I(),(d==null?void 0:d.id)===s&&(o("container-list"),N(null))}catch(t){D(t instanceof Error?t.message:"Failed to delete container")}},E=()=>{C({name:"",description:"",type:"local",properties:{},hash:"",size:0,mimeType:""}),v(null),f(null)},L=()=>{A({name:"",description:"",items:[]}),N(null)},H=s=>e.jsxs("form",{onSubmit:s==="create"?i.type==="local"?V:Y:G,className:"space-y-4 max-w-lg",children:[w&&e.jsx("div",{className:"bg-red-50 border border-red-100 rounded-md p-3",children:e.jsx("p",{className:"text-xs text-red-600",children:w})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",value:i.name,onChange:t=>C({...i,name:t.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"My Cargo Item",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:i.description,onChange:t=>C({...i,description:t.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Description of this cargo item...",rows:3,required:!0})]}),s==="create"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Cargo Type"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",checked:i.type==="local",onChange:()=>C({...i,type:"local",remoteUrl:void 0}),name:"cargoType"}),e.jsx("span",{className:"text-xs",children:"Local File"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",checked:i.type==="remote",onChange:()=>C({...i,type:"remote"}),name:"cargoType"}),e.jsx("span",{className:"text-xs",children:"Remote URL"})]})]})]}),i.type==="local"?e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Upload File"}),e.jsx("input",{type:"file",onChange:t=>v(t.target.files?t.target.files[0]:null),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",required:!0}),m&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Selected: ",m.name," (",T(m.size),")"]})]}):e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Remote URL"}),e.jsx("input",{type:"url",value:i.remoteUrl||"",onChange:t=>C({...i,remoteUrl:t.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"https://example.com/file.zip",required:i.type==="remote"})]})]}),e.jsx(de,{properties:i.properties,onChange:t=>C({...i,properties:t})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"submit",disabled:q,className:"px-3 py-2 text-xs font-medium text-white bg-gray-900 rounded-md hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:q?e.jsx(e.Fragment,{children:"Uploading..."}):s==="create"?"Create Cargo":"Update Cargo"}),e.jsx("button",{type:"button",onClick:()=>{o(s==="edit"?"cargo-view":"cargo-list"),E()},className:"px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Cancel"})]})]}),te=()=>{var s,t,a,h;return r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{o("cargo-list"),f(null),E()},className:"flex items-center text-gray-600 hover:bg-gray-100 p-2 cursor-pointer rounded-md transition hover:text-gray-900",children:e.jsx(_,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:r.name}),e.jsx("p",{className:"text-xs text-gray-500",children:r.type==="local"?"Local File":"Remote URL"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>{C({name:r.name,description:r.description,type:r.type,remoteUrl:r.remoteUrl,properties:r.properties,hash:r.hash,size:r.size,mimeType:r.mimeType}),o("cargo-edit")},className:"flex items-center px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:[e.jsx(W,{className:"w-3.5 h-3.5 mr-1.5"}),"Edit"]}),e.jsxs("button",{onClick:()=>Q(r.id),className:"flex items-center px-3 py-2 text-xs font-medium text-red-600 bg-white border border-gray-200 rounded-md hover:bg-red-50",children:[e.jsx(z,{className:"w-3.5 h-3.5 mr-1.5"}),"Delete"]}),r.type==="local"&&e.jsx("a",{href:`/api/cargo/${r.id}/download`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Download"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-md shadow-xs p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Description"}),e.jsx("div",{className:"text-sm mt-1",children:r.description})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Cargo Details"}),e.jsx("div",{className:"space-y-2",children:r.type==="remote"?e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Remote URL"}),e.jsx("div",{className:"text-sm font-mono mt-1 break-all",children:e.jsx("a",{href:r.remoteUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:r.remoteUrl})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"File Type"}),e.jsx("div",{className:"text-sm mt-1",children:r.mimeType})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Size"}),e.jsx("div",{className:"text-sm mt-1",children:T(r.size||0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Hash"}),e.jsx("div",{className:"text-sm font-mono mt-1 text-xs break-all",children:r.hash})]})]})})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Properties"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"font-medium",children:"Hidden:"})," ",(s=r.properties)!=null&&s.hidden?"Yes":"No"]}),e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"font-medium",children:"Read-only:"})," ",(t=r.properties)!=null&&t.readonly?"Yes":"No"]}),e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"font-medium",children:"No Delete:"})," ",(a=r.properties)!=null&&a.noDelete?"Yes":"No"]})]}),((h=r.properties)==null?void 0:h.customProperties)&&Object.keys(r.properties.customProperties).length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Custom Properties"}),e.jsx("div",{className:"space-y-1 mt-1",children:Object.entries(r.properties.customProperties).map(([p,b])=>e.jsxs("div",{className:"text-xs",children:[e.jsxs("span",{className:"font-medium",children:[p,":"]})," ",JSON.stringify(b)]},p))})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Used In Containers"}),e.jsx("div",{children:g.filter(p=>p.items.some(b=>b.cargoId===r.id)).length>0?e.jsx("div",{className:"space-y-2",children:g.filter(p=>p.items.some(b=>b.cargoId===r.id)).map(p=>{var b;return e.jsxs("div",{className:"flex justify-between items-center border border-gray-100 rounded p-2 hover:bg-gray-50 cursor-pointer",onClick:()=>{N(p),o("container-view")},children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:p.name}),e.jsx("div",{className:"text-xs text-gray-500",children:(b=p.items.find(re=>re.cargoId===r.id))==null?void 0:b.targetPath})]})]}),e.jsx(R,{className:"w-4 h-4 text-gray-400"})]},p.id)})}):e.jsx("div",{className:"text-xs text-gray-500",children:"Not used in any containers"})})]}),r.createdAt&&r.updatedAt&&e.jsxs("div",{className:"pt-4 border-t border-gray-100 grid grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Created At"}),e.jsx("div",{className:"text-sm mt-1",children:new Date(r.createdAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Updated At"}),e.jsx("div",{className:"text-sm mt-1",children:new Date(r.updatedAt).toLocaleString()})]})]})]})]}):null},M=s=>e.jsxs("form",{onSubmit:s==="create"?X:Z,className:"space-y-4 max-w-lg",children:[w&&e.jsx("div",{className:"bg-red-50 border border-red-100 rounded-md p-3",children:e.jsx("p",{className:"text-xs text-red-600",children:w})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",value:y.name,onChange:t=>A({...y,name:t.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"My Container",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:y.description,onChange:t=>A({...y,description:t.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Description of this container...",rows:3,required:!0})]}),e.jsx(me,{items:y.items,onChange:t=>A({...y,items:t})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"submit",className:"px-3 py-2 text-xs font-medium text-white bg-gray-900 rounded-md hover:bg-gray-800",children:s==="create"?"Create Container":"Update Container"}),e.jsx("button",{type:"button",onClick:()=>{o(s==="edit"?"container-view":"container-list"),L()},className:"px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Cancel"})]})]}),se=()=>d?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{o("container-list"),N(null)},className:"flex items-center text-gray-600 hover:bg-gray-100 p-2 cursor-pointer rounded-md transition hover:text-gray-900",children:e.jsx(_,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:d.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[d.items.length," item",d.items.length!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>{A({name:d.name,description:d.description,items:d.items}),o("container-edit")},className:"flex items-center px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:[e.jsx(W,{className:"w-3.5 h-3.5 mr-1.5"}),"Edit"]}),e.jsxs("button",{onClick:()=>ee(d.id),className:"flex items-center px-3 py-2 text-xs font-medium text-red-600 bg-white border border-gray-200 rounded-md hover:bg-red-50",children:[e.jsx(z,{className:"w-3.5 h-3.5 mr-1.5"}),"Delete"]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-md shadow-xs p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Description"}),e.jsx("div",{className:"text-sm mt-1",children:d.description})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Container Items"}),d.items.length>0?e.jsx("div",{className:"space-y-3",children:d.items.map((s,t)=>{const a=c.find(h=>h.id===s.cargoId);return e.jsx("div",{className:"border border-gray-100 rounded p-3 hover:bg-gray-50 cursor-pointer",onClick:()=>{a&&(f(a),o("cargo-view"))},children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"pt-1",children:(a==null?void 0:a.type)==="local"?e.jsx($,{className:"w-4 h-4 text-gray-400"}):e.jsx(O,{className:"w-4 h-4 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:(a==null?void 0:a.name)||"Unknown Cargo"}),e.jsxs("div",{className:"text-xs font-mono mt-1",children:["â†’ ",s.targetPath]}),a&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:a.type==="local"?`${T(a.size||0)} â€¢ ${a.mimeType}`:"Remote URL"})]})]})},t)})}):e.jsx("div",{className:"text-xs text-gray-500",children:"No items in this container"})]}),d.createdAt&&d.updatedAt&&e.jsxs("div",{className:"pt-4 border-t border-gray-100 grid grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Created At"}),e.jsx("div",{className:"text-sm mt-1",children:new Date(d.createdAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Updated At"}),e.jsx("div",{className:"text-sm mt-1",children:new Date(d.updatedAt).toLocaleString()})]})]})]})]}):null;return P?e.jsx(ne,{}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(oe,{}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsxs("div",{className:"flex",children:[e.jsxs("button",{className:`pb-2 text-md font-medium relative ${n.startsWith("cargo-")?"text-gray-800 border-indigo-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>{o("cargo-list"),f(null),N(null)},children:["All cargo ",e.jsx("span",{className:"text-gray-500 ml-0.5 mr-0.5",children:c.length}),n.startsWith("cargo-")&&e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-indigo-600"})]}),e.jsxs("button",{className:`pb-2 ml-6 text-md font-medium relative ${n.startsWith("container-")?"text-gray-800 border-indigo-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>{o("container-list"),f(null),N(null)},children:["Containers ",e.jsx("span",{className:"text-gray-500 ml-0.5 mr-0.5",children:g.length}),n.startsWith("container-")&&e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-indigo-600"})]})]})}),F&&e.jsx("div",{className:"bg-red-50 border border-red-100 rounded-md p-4 mb-6",children:e.jsx("p",{className:"text-sm text-red-600",children:F})}),n==="cargo-list"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Cargo Items"})}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("button",{onClick:()=>{E(),o("cargo-create")},className:"px-3 py-2 text-xs font-medium text-white bg-gray-900 rounded-md hover:bg-gray-800",children:"Create Cargo"})})]}),e.jsx("div",{className:"space-y-2",children:c.length>0?c.map(s=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-md shadow-xs cursor-pointer hover:border-gray-300",onClick:()=>{f(s),o("cargo-view")},children:e.jsxs("div",{className:"px-6 h-20 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[s.type==="local"?e.jsx($,{className:"w-5 h-5 text-gray-400"}):e.jsx(O,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s.type==="local"?`${T(s.size||0)} â€¢ ${s.mimeType}`:s.remoteUrl})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(R,{className:"w-4 h-4 text-gray-400"})})]})},s.id)):e.jsx("div",{className:"text-center py-6 bg-white rounded-md border border-gray-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx($,{className:"w-6 h-6 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No cargo items found"}),e.jsx("button",{onClick:()=>{E(),o("cargo-create")},className:"mt-2 px-3 py-1 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Create Cargo"})]})})})]}),n==="cargo-create"&&H("create"),n==="cargo-edit"&&H("edit"),n==="cargo-view"&&te(),n==="container-list"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Containers"})}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("button",{onClick:()=>{L(),o("container-create")},className:"px-3 py-2 text-xs font-medium text-white bg-gray-900 rounded-md hover:bg-gray-800",children:"Create Container"})})]}),e.jsx("div",{className:"space-y-2",children:g.length>0?g.map(s=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-md shadow-xs cursor-pointer hover:border-gray-300",onClick:()=>{N(s),o("container-view")},children:e.jsxs("div",{className:"px-6 h-20 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(B,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.items.length," item",s.items.length!==1?"s":""]})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(R,{className:"w-4 h-4 text-gray-400"})})]})},s.id)):e.jsx("div",{className:"text-center py-6 bg-white rounded-md border border-gray-200",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(B,{className:"w-6 h-6 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No containers found"}),e.jsx("button",{onClick:()=>{L(),o("container-create")},className:"mt-2 px-3 py-1 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Create Container"})]})})})]}),n==="container-create"&&M("create"),n==="container-edit"&&M("edit"),n==="container-view"&&se()]})]})};export{fe as default};
