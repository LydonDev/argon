import{c as ee,e as _,r as S,j as e,L as te}from"./main-DFB4SX2f.js";import{z as i}from"./index-mSkvzYyn.js";import{A as ae}from"./AdminBar-otKUkLxa.js";import{C as se}from"./chevron-right-D83jph9Y.js";import{A as re}from"./arrow-left-CRbpnAqr.js";import{a as ne,T as P,P as oe}from"./trash-CbqpbPXx.js";import{P as ie}from"./package-DDDfEcaX.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],z=ee("Tag",le);var T={exports:{}},de=T.exports,J;function ce(){return J||(J=1,function(m,b){(function(f,N){N()})(de,function(){function f(d,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function N(d,c,y){var a=new XMLHttpRequest;a.open("GET",d),a.responseType="blob",a.onload=function(){t(a.response,c,y)},a.onerror=function(){console.error("could not download file")},a.send()}function h(d){var c=new XMLHttpRequest;c.open("HEAD",d,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function l(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(c)}}var n=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof _=="object"&&_.global===_?_:void 0,s=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),t=n.saveAs||(typeof window!="object"||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(d,c,y){var a=n.URL||n.webkitURL,x=document.createElement("a");c=c||d.name||"download",x.download=c,x.rel="noopener",typeof d=="string"?(x.href=d,x.origin===location.origin?l(x):h(x.href)?N(d,c,y):l(x,x.target="_blank")):(x.href=a.createObjectURL(d),setTimeout(function(){a.revokeObjectURL(x.href)},4e4),setTimeout(function(){l(x)},0))}:"msSaveOrOpenBlob"in navigator?function(d,c,y){if(c=c||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(f(d,y),c);else if(h(d))N(d,c,y);else{var a=document.createElement("a");a.href=d,a.target="_blank",setTimeout(function(){l(a)})}}:function(d,c,y,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),typeof d=="string")return N(d,c,y);var x=d.type==="application/octet-stream",D=/constructor/i.test(n.HTMLElement)||n.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||x&&D||s)&&typeof FileReader<"u"){var u=new FileReader;u.onloadend=function(){var L=u.result;L=p?L:L.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=L:location=L,a=null},u.readAsDataURL(d)}else{var I=n.URL||n.webkitURL,R=I.createObjectURL(d);a?a.location=R:location.href=R,a=null,setTimeout(function(){I.revokeObjectURL(R)},4e4)}});n.saveAs=t.saveAs=t,m.exports=t})}(T)),T.exports}var me=ce();const xe=i.object({image:i.string().min(1),displayName:i.string().min(1)}),pe=i.object({name:i.string().min(1),description:i.string(),iconPath:i.string().optional(),type:i.enum(["required","optional"]),uiData:i.object({component:i.string(),props:i.record(i.any()).optional()}).optional()}),ue=i.object({version:i.string().default("argon/unit:v3"),author:i.string().optional(),website:i.string().optional(),supportUrl:i.string().optional()}),ge=i.object({name:i.string().min(1),description:i.string().optional(),defaultValue:i.string(),required:i.boolean().default(!1),userViewable:i.boolean().default(!0),userEditable:i.boolean().default(!1),rules:i.string()}),he=i.object({path:i.string().min(1),content:i.string()}),be=i.object({dockerImage:i.string(),entrypoint:i.string().default("bash"),script:i.string()}),H=i.object({id:i.string().optional(),name:i.string().min(1).max(100),shortName:i.string().min(1).max(20).regex(/^[a-z0-9-]+$/),description:i.string(),dockerImages:i.array(xe).min(1),defaultDockerImage:i.string(),dockerImage:i.string(),defaultStartupCommand:i.string(),configFiles:i.array(he).default([]),environmentVariables:i.array(ge).default([]),installScript:be,startup:i.object({userEditable:i.boolean().default(!1),readyRegex:i.string().optional(),stopCommand:i.string().optional()}).default({}),features:i.array(pe).default([]),meta:ue.default({version:"argon/unit:v3"}),createdAt:i.date().optional(),updatedAt:i.date().optional()});i.object({id:i.string(),name:i.string(),description:i.string(),items:i.array(i.object({cargoId:i.string(),targetPath:i.string()})),createdAt:i.date().optional(),updatedAt:i.date().optional()});const ye=({images:m,defaultImage:b,onChange:f})=>{const N=()=>{const s=[...m,{image:"",displayName:""}];f(s,b||(s.length>0?s[0].image:""))},h=s=>{const t=m.filter((c,y)=>y!==s);let d=b;t.length>0&&!t.some(c=>c.image===b)&&(d=t[0].image),f(t,d)},l=(s,t,d)=>{const c=m.map((a,x)=>x===s?{...a,[t]:d}:a);let y=b;t==="image"&&m[s].image===b&&(y=d),f(c,y)},n=s=>{f(m,s)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Docker Images"}),e.jsx("button",{type:"button",onClick:N,className:"px-2 py-1 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Add Image"})]}),m.map((s,t)=>e.jsx("div",{className:"border border-gray-200 rounded-md p-3 space-y-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"grow space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",value:s.image,onChange:d=>l(t,"image",d.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Docker Image Path (e.g., itzg/minecraft-server:java17)"}),e.jsx("input",{type:"text",value:s.displayName,onChange:d=>l(t,"displayName",d.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Display Name (e.g., Java 17)"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("button",{type:"button",onClick:()=>n(s.image),className:`px-2 py-1 text-xs font-medium rounded-md ${b===s.image?"bg-green-50 text-green-600 border border-green-200":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"}`,children:b===s.image?"Default Image":"Set as Default"})})]}),e.jsx("button",{type:"button",onClick:()=>h(t),className:"ml-2 p-1 text-gray-400 hover:text-red-500",disabled:m.length<=1,children:e.jsx(P,{className:"w-4 h-4"})})]})},t)),m.length===0&&e.jsx("div",{className:"text-center py-4 border border-gray-200 border-dashed rounded-md",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Add at least one Docker image"})})]})},je=({features:m,onChange:b})=>{const f=()=>{b([...m,{name:"",description:"",type:"optional",uiData:{component:"checkbox",props:{}}}])},N=l=>{b(m.filter((n,s)=>s!==l))},h=(l,n,s)=>{b(m.map((t,d)=>{if(d!==l)return t;if(n.includes(".")){const[c,y]=n.split(".");return{...t,[c]:{...t[c],[y]:s}}}return{...t,[n]:s}}))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Features"}),e.jsx("button",{type:"button",onClick:f,className:"px-2 py-1 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Add Feature"})]}),m.map((l,n)=>{var s,t,d,c,y;return e.jsx("div",{className:"border border-gray-200 rounded-md p-3 space-y-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"grow space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",value:l.name,onChange:a=>h(n,"name",a.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Feature Name (e.g., eula-agreement)"}),e.jsxs("select",{value:l.type,onChange:a=>h(n,"type",a.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",children:[e.jsx("option",{value:"required",children:"Required"}),e.jsx("option",{value:"optional",children:"Optional"})]})]}),e.jsx("input",{type:"text",value:l.description||"",onChange:a=>h(n,"description",a.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Description (e.g., Accept the Minecraft EULA)"}),e.jsx("input",{type:"text",value:l.iconPath||"",onChange:a=>h(n,"iconPath",a.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Icon Path (optional, e.g., /assets/icons/document.svg)"}),l.uiData&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-3 bg-gray-50 rounded-md",children:[e.jsx("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"UI Component Configuration"}),e.jsxs("select",{value:l.uiData.component,onChange:a=>h(n,"uiData.component",a.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md mb-2",children:[e.jsx("option",{value:"checkbox",children:"Checkbox"}),e.jsx("option",{value:"select",children:"Select (Dropdown)"})]}),l.uiData.component==="checkbox"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:((s=l.uiData.props)==null?void 0:s.label)||"",onChange:a=>h(n,"uiData.props",{...l.uiData.props,label:a.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Checkbox Label (e.g., I accept the EULA)"}),e.jsx("input",{type:"text",value:((t=l.uiData.props)==null?void 0:t.link)||"",onChange:a=>h(n,"uiData.props",{...l.uiData.props,link:a.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Link URL (optional, e.g., https://minecraft.net/eula)"})]}),l.uiData.component==="select"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:((d=l.uiData.props)==null?void 0:d.label)||"",onChange:a=>h(n,"uiData.props",{...l.uiData.props,label:a.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Select Label (e.g., Java Version)"}),e.jsx("div",{className:"text-xs text-gray-700 mt-2 mb-1",children:"Options:"}),(y=(c=l.uiData.props)==null?void 0:c.options)==null?void 0:y.map((a,x)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:a.value,onChange:D=>{var u;const p=[...((u=l.uiData.props)==null?void 0:u.options)||[]];p[x]={...a,value:D.target.value},h(n,"uiData.props",{...l.uiData.props,options:p})},className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Value"}),e.jsx("input",{type:"text",value:a.label,onChange:D=>{var u;const p=[...((u=l.uiData.props)==null?void 0:u.options)||[]];p[x]={...a,label:D.target.value},h(n,"uiData.props",{...l.uiData.props,options:p})},className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Label"}),e.jsx("button",{type:"button",onClick:()=>{var p,u;const D=((u=(p=l.uiData.props)==null?void 0:p.options)==null?void 0:u.filter((I,R)=>R!==x))||[];h(n,"uiData.props",{...l.uiData.props,options:D})},className:"p-1 text-gray-400 hover:text-red-500",children:e.jsx(P,{className:"w-3 h-3"})})]},x)),e.jsx("button",{type:"button",onClick:()=>{var x;const a=((x=l.uiData.props)==null?void 0:x.options)||[];h(n,"uiData.props",{...l.uiData.props,options:[...a,{value:"",label:""}]})},className:"px-2 py-1 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50 mt-1",children:"Add Option"})]})]})})]}),e.jsx("button",{type:"button",onClick:()=>N(n),className:"ml-2 p-1 text-gray-400 hover:text-red-500",children:e.jsx(P,{className:"w-4 h-4"})})]})},n)}),m.length===0&&e.jsx("div",{className:"text-center py-4 border border-gray-200 border-dashed rounded-md",children:e.jsx("p",{className:"text-xs text-gray-500",children:"No features defined"})})]})},fe=({meta:m,onChange:b})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Metadata"})}),e.jsxs("div",{className:"border border-gray-200 rounded-md p-3 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Version"}),e.jsx("input",{type:"text",value:m.version,readOnly:!0,className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Author"}),e.jsx("input",{type:"text",value:m.author||"",onChange:f=>b({...m,author:f.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Author name or organization"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Website"}),e.jsx("input",{type:"text",value:m.website||"",onChange:f=>b({...m,website:f.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"https://example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Support URL"}),e.jsx("input",{type:"text",value:m.supportUrl||"",onChange:f=>b({...m,supportUrl:f.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"https://support.example.com"})]})]})]}),ve=({variables:m,onChange:b})=>{const f=()=>{b([...m,{name:"",description:"",defaultValue:"",required:!1,userViewable:!0,userEditable:!1,rules:"string"}])},N=l=>{b(m.filter((n,s)=>s!==l))},h=(l,n,s)=>{b(m.map((t,d)=>d===l?{...t,[n]:s}:t))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Environment Variables"}),e.jsx("button",{type:"button",onClick:f,className:"px-2 py-1 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Add Variable"})]}),m.map((l,n)=>e.jsx("div",{className:"border border-gray-200 rounded-md p-3 space-y-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"grow space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",value:l.name,onChange:s=>h(n,"name",s.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Variable Name"}),e.jsx("input",{type:"text",value:l.defaultValue,onChange:s=>h(n,"defaultValue",s.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Default Value"})]}),e.jsx("input",{type:"text",value:l.description||"",onChange:s=>h(n,"description",s.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Description (optional)"}),e.jsx("input",{type:"text",value:l.rules,onChange:s=>h(n,"rules",s.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Validation Rules (e.g., string|max:20)"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:l.required,onChange:s=>h(n,"required",s.target.checked),className:"text-xs"}),e.jsx("span",{className:"text-xs",children:"Required"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:l.userViewable,onChange:s=>h(n,"userViewable",s.target.checked),className:"text-xs"}),e.jsx("span",{className:"text-xs",children:"User Viewable"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:l.userEditable,onChange:s=>h(n,"userEditable",s.target.checked),className:"text-xs"}),e.jsx("span",{className:"text-xs",children:"User Editable"})]})]})]}),e.jsx("button",{type:"button",onClick:()=>N(n),className:"ml-2 p-1 text-gray-400 hover:text-red-500",children:e.jsx(P,{className:"w-4 h-4"})})]})},n)),m.length===0&&e.jsx("div",{className:"text-center py-4 border border-gray-200 border-dashed rounded-md",children:e.jsx("p",{className:"text-xs text-gray-500",children:"No variables defined"})})]})},Ne=({files:m,onChange:b})=>{const f=()=>{b([...m,{path:"",content:""}])},N=l=>{b(m.filter((n,s)=>s!==l))},h=(l,n,s)=>{b(m.map((t,d)=>d===l?{...t,[n]:s}:t))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Configuration Files"}),e.jsx("button",{type:"button",onClick:f,className:"px-2 py-1 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Add File"})]}),m.map((l,n)=>e.jsx("div",{className:"border border-gray-200 rounded-md p-3 space-y-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"grow space-y-3",children:[e.jsx("input",{type:"text",value:l.path,onChange:s=>h(n,"path",s.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"File Path (e.g., server.properties)"}),e.jsx("textarea",{value:l.content,onChange:s=>h(n,"content",s.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md font-mono",placeholder:"File Content",rows:5})]}),e.jsx("button",{type:"button",onClick:()=>N(n),className:"ml-2 p-1 text-gray-400 hover:text-red-500",children:e.jsx(P,{className:"w-4 h-4"})})]})},n)),m.length===0&&e.jsx("div",{className:"text-center py-4 border border-gray-200 border-dashed rounded-md",children:e.jsx("p",{className:"text-xs text-gray-500",children:"No configuration files defined"})})]})},X=({unitId:m,assignedContainers:b,onRefresh:f})=>{const[N,h]=S.useState([]),[l,n]=S.useState(!1),[s,t]=S.useState(null),[d,c]=S.useState(!1);S.useEffect(()=>{d&&y()},[d]);const y=async()=>{if(m){n(!0);try{const p=localStorage.getItem("token"),u=await fetch("/api/cargo/container",{headers:{Authorization:`Bearer ${p}`}});if(!u.ok){if(u.status===404)return h([]),[];throw new Error("Failed to fetch containers")}const I=await u.json();h(I)}catch(p){t(p instanceof Error?p.message:"An error occurred")}finally{n(!1)}}},a=async p=>{if(m)try{const u=localStorage.getItem("token");if(!(await fetch(`/api/units/${m}/containers/${p}`,{method:"POST",headers:{Authorization:`Bearer ${u}`}})).ok)throw new Error("Failed to assign container");f(),c(!1)}catch(u){t(u instanceof Error?u.message:"Failed to assign container")}},x=async p=>{if(m)try{const u=localStorage.getItem("token");if(!(await fetch(`/api/units/${m}/containers/${p}`,{method:"DELETE",headers:{Authorization:`Bearer ${u}`}})).ok)throw new Error("Failed to remove container");f()}catch(u){t(u instanceof Error?u.message:"Failed to remove container")}},D=N.filter(p=>!b.some(u=>u.id===p.id));return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Cargo Containers"}),e.jsxs("button",{type:"button",onClick:()=>c(!d),className:"px-2 py-1 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50 flex items-center",children:[e.jsx(oe,{className:"w-3 h-3 mr-1"}),"Add Container"]})]}),s&&e.jsx("div",{className:"bg-red-50 text-red-600 p-2 rounded-md text-xs",children:s}),d&&e.jsxs("div",{className:"border border-gray-200 rounded-md p-3",children:[e.jsx("h4",{className:"text-xs font-medium mb-2",children:"Select a container to add"}),l?e.jsx("div",{className:"text-center py-4",children:e.jsx("span",{className:"text-xs text-gray-500",children:"Loading..."})}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:D.length>0?D.map(p=>e.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-gray-50 rounded-md border border-gray-100",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:p.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[p.items.length," items"]})]}),e.jsx("button",{onClick:()=>a(p.id),className:"px-2 py-1 text-xs text-gray-600 hover:bg-gray-100 rounded",children:"Add"})]},p.id)):e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-xs text-gray-500",children:"No available containers"})})}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsx("button",{onClick:()=>c(!1),className:"px-2 py-1 text-xs text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"})})]}),e.jsx("div",{children:b.length>0?e.jsx("div",{className:"space-y-2",children:b.map(p=>e.jsx("div",{className:"border border-gray-200 rounded-md p-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:p.name}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:p.description}),p.items&&p.items.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs font-medium text-gray-700 mb-1",children:"Items:"}),e.jsx("div",{className:"space-y-1 ml-2",children:p.items.map((u,I)=>e.jsxs("div",{className:"text-xs",children:["→ ",e.jsx("span",{className:"font-mono",children:u.targetPath})]},I))})]})]}),e.jsx("button",{onClick:()=>x(p.id),className:"text-gray-400 hover:text-red-500",children:e.jsx(P,{className:"w-4 h-4"})})]})},p.id))}):e.jsx("div",{className:"text-center py-4 border border-gray-200 border-dashed rounded-md",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(ie,{className:"w-5 h-5 text-gray-400 mb-1"}),e.jsx("p",{className:"text-xs text-gray-500",children:"No containers assigned"})]})})})]})},Fe=()=>{const[m,b]=S.useState([]),[f,N]=S.useState(!0),[h,l]=S.useState(null),[n,s]=S.useState("list"),[t,d]=S.useState(null),[c,y]=S.useState([]),[a,x]=S.useState({name:"",shortName:"",description:"",dockerImages:[{image:"",displayName:"Default Image"}],defaultDockerImage:"",dockerImage:"",defaultStartupCommand:"",configFiles:[],environmentVariables:[],installScript:{dockerImage:"",entrypoint:"bash",script:""},startup:{userEditable:!1,readyRegex:"",stopCommand:""},features:[],meta:{version:"argon/unit:v3",author:"",website:"",supportUrl:""}}),[D,p]=S.useState(null);S.useEffect(()=>{u()},[]);const u=async()=>{try{const o=localStorage.getItem("token"),r=await fetch("/api/units",{headers:{Authorization:`Bearer ${o}`}});if(!r.ok)throw new Error("Failed to fetch units");const j=await r.json();b(j),N(!1)}catch(o){l(o instanceof Error?o.message:"An error occurred"),N(!1)}},I=async o=>{try{const r=localStorage.getItem("token"),j=await fetch(`/api/units/${o}/containers`,{headers:{Authorization:`Bearer ${r}`}});if(!j.ok)throw new Error("Failed to fetch unit containers");const w=await j.json();y(w)}catch(r){console.error("Failed to fetch containers:",r),y([])}};S.useEffect(()=>{t!=null&&t.id&&(n==="view"||n==="edit")&&I(t.id)},[t,n]);const R=async o=>{o.preventDefault(),p(null);try{const r=H.omit({id:!0,createdAt:!0,updatedAt:!0}).parse(a),j=localStorage.getItem("token"),w=await fetch("/api/units",{method:"POST",headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(!w.ok){const F=await w.json();throw new Error(F.error||"Failed to create unit")}await u(),s("list"),$()}catch(r){r instanceof i.ZodError?p("Invalid input. Please check your data."):p(r instanceof Error?r.message:"Failed to create unit")}},L=async o=>{if(o.preventDefault(),!!t){p(null);try{const r=H.partial().omit({id:!0,createdAt:!0,updatedAt:!0}).parse(a),j=localStorage.getItem("token"),w=await fetch(`/api/units/${t.id}`,{method:"PATCH",headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(!w.ok){const F=await w.json();throw new Error(F.error||"Failed to update unit")}await u(),s("list"),$()}catch(r){r instanceof i.ZodError?p("Invalid input. Please check your data."):p(r instanceof Error?r.message:"Failed to update unit")}}},W=async o=>{try{const r=localStorage.getItem("token"),j=await fetch(`/api/units/${o}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}});if(!j.ok){const w=await j.json();throw new Error(w.error||"Failed to delete unit")}await u(),(t==null?void 0:t.id)===o&&(s("list"),d(null))}catch(r){l(r instanceof Error?r.message:"Failed to delete unit")}},$=()=>{x({name:"",shortName:"",description:"",dockerImages:[{image:"",displayName:"Default Image"}],defaultDockerImage:"",dockerImage:"",defaultStartupCommand:"",configFiles:[],environmentVariables:[],installScript:{dockerImage:"",entrypoint:"bash",script:""},startup:{userEditable:!1,readyRegex:"",stopCommand:""},features:[],meta:{version:"argon/unit:v3",author:"",website:"",supportUrl:""}}),d(null),y([])},G=o=>{const r={name:o.name,shortName:o.shortName,description:o.description,dockerImages:o.dockerImages,defaultDockerImage:o.defaultDockerImage,dockerImage:o.dockerImage,defaultStartupCommand:o.defaultStartupCommand,configFiles:o.configFiles,environmentVariables:o.environmentVariables,installScript:o.installScript,startup:o.startup,features:o.features,meta:o.meta},j=new Blob([JSON.stringify(r,null,2)],{type:"application/json"});me.saveAs(j,`unit-${o.shortName}.json`)},Y=async o=>{var w;if(!((w=o.target.files)!=null&&w.length))return;const r=o.target.files[0],j=new FileReader;j.onload=async F=>{var V;try{const A=(V=F.target)==null?void 0:V.result,k=JSON.parse(A);k.dockerImage&&(!k.dockerImages||k.dockerImages.length===0)&&(k.dockerImages=[{image:k.dockerImage,displayName:"Default Image"}],k.defaultDockerImage=k.dockerImage),k.meta||(k.meta={version:"argon/unit:v3"}),k.features||(k.features=[]);const O=localStorage.getItem("token"),g=await fetch("/api/units/import",{method:"POST",headers:{Authorization:`Bearer ${O}`},body:(()=>{const C=new FormData,U=new Blob([JSON.stringify(k)],{type:"application/json"});return C.append("file",U,"unit.json"),C})()});if(!g.ok){const C=await g.json();throw new Error(C.error||"Import failed")}await u(),s("list")}catch(A){l(A instanceof Error?A.message:"Failed to import unit")}},j.readAsText(r)},Z=async o=>{var w;if(!((w=o.target.files)!=null&&w.length))return;const r=o.target.files[0],j=new FileReader;j.onload=async F=>{var V,A,k,O,g,C;try{const U=(V=F.target)==null?void 0:V.result;let v=JSON.parse(U);typeof v=="string"&&(v=v.replace("{{","%").replace("}}","%"),v=JSON.parse(v));const q={name:v.name,shortName:v.name.toLowerCase().replace(/[^a-z0-9-]/g,"-"),description:v.description,dockerImages:[{image:Object.values(v.docker_images)[0],displayName:"Default Image"}],defaultDockerImage:Object.values(v.docker_images)[0],dockerImage:Object.values(v.docker_images)[0],defaultStartupCommand:v.startup,configFiles:[],environmentVariables:v.variables.map(E=>({name:E.env_variable,description:E.description,defaultValue:E.default_value,required:E.rules.includes("required"),userViewable:E.user_viewable,userEditable:E.user_editable,rules:E.rules})),installScript:{dockerImage:v.scripts.installation.container,entrypoint:v.scripts.installation.entrypoint,script:v.scripts.installation.script},startup:{userEditable:!0,readyRegex:((O=(k=(A=v.config)==null?void 0:A.container)==null?void 0:k.startup)==null?void 0:O.done)||"",stopCommand:((C=(g=v.config)==null?void 0:g.container)==null?void 0:C.stop)||""},features:[],meta:{version:"argon/unit:v3",author:v.author||"Imported from Pterodactyl",website:"",supportUrl:""}};q.environmentVariables.some(E=>E.name==="EULA"||E.name==="MC_EULA")&&q.features.push({name:"eula-agreement",description:"Minecraft EULA acceptance is required to run the server",type:"required",uiData:{component:"checkbox",props:{label:"I accept the Minecraft End User License Agreement",link:"https://www.minecraft.net/en-us/eula"}}});const Q=localStorage.getItem("token"),B=await fetch("/api/units",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Q}`},body:JSON.stringify(q)});if(!B.ok){const E=await B.json();throw new Error(E.error||"Import failed")}await u(),s("list")}catch(U){l(U instanceof Error?U.message:"Failed to import Pterodactyl egg")}},j.readAsText(r)},M=o=>e.jsxs("form",{onSubmit:o==="create"?R:L,className:"space-y-4 max-w-lg",children:[D&&e.jsx("div",{className:"bg-red-50 border border-red-100 rounded-md p-3",children:e.jsx("p",{className:"text-xs text-red-600",children:D})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",value:a.name,onChange:r=>x({...a,name:r.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Minecraft Java Server",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Short Name (lowercase, numbers, hyphens)"}),e.jsx("input",{type:"text",value:a.shortName,onChange:r=>x({...a,shortName:r.target.value.toLowerCase()}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"minecraft-java",pattern:"[a-z0-9-]+",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:r=>x({...a,description:r.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Detailed description of the unit...",rows:3,required:!0})]}),e.jsx(ye,{images:a.dockerImages,defaultImage:a.defaultDockerImage,onChange:(r,j)=>x({...a,dockerImages:r,defaultDockerImage:j,dockerImage:j})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Default Startup Command"}),e.jsx("input",{type:"text",value:a.defaultStartupCommand,onChange:r=>x({...a,defaultStartupCommand:r.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"java -Xms128M -Xmx{{SERVER_MEMORY}}M -jar server.jar",required:!0})]}),e.jsxs("div",{className:"space-y-3 p-3 border border-gray-200 rounded-md",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Startup Configuration"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:a.startup.userEditable,onChange:r=>x({...a,startup:{...a.startup,userEditable:r.target.checked}}),className:"text-xs"}),e.jsx("span",{className:"text-xs",children:"User Editable"})]})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs text-gray-500",children:"Ready Regex (detects when server is online)"}),e.jsx("input",{type:"text",value:a.startup.readyRegex||"",onChange:r=>x({...a,startup:{...a.startup,readyRegex:r.target.value}}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"e.g., Done \\(.*\\)!"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs text-gray-500",children:"Stop Command (gracefully stops the server)"}),e.jsx("input",{type:"text",value:a.startup.stopCommand||"",onChange:r=>x({...a,startup:{...a.startup,stopCommand:r.target.value}}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"e.g., stop"})]})]}),e.jsx(ve,{variables:a.environmentVariables,onChange:r=>x({...a,environmentVariables:r})}),e.jsx(Ne,{files:a.configFiles,onChange:r=>x({...a,configFiles:r})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Install Script Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",value:a.installScript.dockerImage,onChange:r=>x({...a,installScript:{...a.installScript,dockerImage:r.target.value}}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Install Docker Image",required:!0}),e.jsx("input",{type:"text",value:a.installScript.entrypoint,onChange:r=>x({...a,installScript:{...a.installScript,entrypoint:r.target.value}}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Entrypoint (default: bash)",defaultValue:"bash"})]}),e.jsx("textarea",{value:a.installScript.script,onChange:r=>x({...a,installScript:{...a.installScript,script:r.target.value}}),className:"mt-2 block w-full px-3 py-2 text-xs border border-gray-200 rounded-md font-mono",placeholder:"Install script commands...",rows:4,required:!0})]}),e.jsx(je,{features:a.features,onChange:r=>x({...a,features:r})}),e.jsx(fe,{meta:a.meta,onChange:r=>x({...a,meta:r})}),o==="edit"&&(t==null?void 0:t.id)&&e.jsx("div",{className:"pt-4 border-t border-gray-100",children:e.jsx(X,{unitId:t.id,assignedContainers:c,onRefresh:()=>I(t.id)})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"submit",className:"px-3 py-2 text-xs font-medium text-white bg-gray-900 rounded-md hover:bg-gray-800",children:o==="create"?"Create Unit":"Update Unit"}),e.jsx("button",{type:"button",onClick:()=>{s(o==="edit"?"view":"list"),$()},className:"px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Cancel"})]})]}),K=()=>{var o,r,j,w,F,V,A,k,O;return t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{s("list"),d(null)},className:"flex items-center text-gray-600 hover:bg-gray-100 p-2 cursor-pointer rounded-md transition hover:text-gray-900",children:e.jsx(re,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.shortName})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>{x({name:t.name,shortName:t.shortName,description:t.description,dockerImages:t.dockerImages||[{image:t.dockerImage,displayName:"Default Image"}],defaultDockerImage:t.defaultDockerImage||t.dockerImage,dockerImage:t.dockerImage,defaultStartupCommand:t.defaultStartupCommand,configFiles:t.configFiles||[],environmentVariables:t.environmentVariables||[],installScript:t.installScript,startup:t.startup,features:t.features||[],meta:t.meta||{version:"argon/unit:v3"}}),s("edit")},className:"flex items-center px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:[e.jsx(ne,{className:"w-3.5 h-3.5 mr-1.5"}),"Edit"]}),e.jsxs("button",{onClick:()=>W(t.id),className:"flex items-center px-3 py-2 text-xs font-medium text-red-600 bg-white border border-gray-200 rounded-md hover:bg-red-50",children:[e.jsx(P,{className:"w-3.5 h-3.5 mr-1.5"}),"Delete"]}),e.jsx("button",{onClick:()=>G(t),className:"px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Export"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-md shadow-xs p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Description"}),e.jsx("div",{className:"text-sm mt-1",children:t.description})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Docker Images"}),t.dockerImages&&t.dockerImages.length>0?e.jsx("div",{className:"space-y-2",children:t.dockerImages.map((g,C)=>e.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-100 rounded",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(z,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:g.displayName}),e.jsx("div",{className:"text-xs font-mono text-gray-500",children:g.image})]})]}),t.defaultDockerImage===g.image&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-50 text-green-600 rounded-full",children:"Default"})]},C))}):e.jsxs("div",{className:"flex items-center p-2 border border-gray-100 rounded",children:[e.jsx(z,{className:"w-4 h-4 text-gray-400 mr-3"}),e.jsx("div",{className:"text-sm font-mono",children:t.dockerImage})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Startup Configuration"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Default Startup Command"}),e.jsx("div",{className:"text-sm font-mono mt-1 break-all",children:t.defaultStartupCommand})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"User Editable"}),e.jsx("div",{className:"text-sm mt-1",children:(o=t.startup)!=null&&o.userEditable?"Yes":"No"})]}),((r=t.startup)==null?void 0:r.readyRegex)&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Ready Detection"}),e.jsx("div",{className:"text-sm font-mono mt-1 break-all",children:t.startup.readyRegex})]}),((j=t.startup)==null?void 0:j.stopCommand)&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Stop Command"}),e.jsx("div",{className:"text-sm font-mono mt-1",children:t.startup.stopCommand})]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Environment Variables"}),t.environmentVariables.length>0?e.jsx("div",{className:"space-y-3",children:t.environmentVariables.map((g,C)=>e.jsxs("div",{className:"border border-gray-100 rounded p-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Name"}),e.jsx("div",{className:"text-sm font-mono mt-1",children:g.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Default Value"}),e.jsx("div",{className:"text-sm font-mono mt-1",children:g.defaultValue})]})]}),g.description&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Description"}),e.jsx("div",{className:"text-sm mt-1",children:g.description})]}),e.jsxs("div",{className:"mt-2 flex space-x-4",children:[e.jsx("div",{className:"text-xs text-gray-500",children:g.required?"Required":"Optional"}),e.jsx("div",{className:"text-xs text-gray-500",children:g.userViewable?"User Viewable":"Hidden"}),e.jsx("div",{className:"text-xs text-gray-500",children:g.userEditable?"User Editable":"Locked"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Validation Rules"}),e.jsx("div",{className:"text-sm font-mono mt-1",children:g.rules})]})]},C))}):e.jsx("div",{className:"text-xs text-gray-500",children:"No environment variables defined"})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Configuration Files"}),t.configFiles.length>0?e.jsx("div",{className:"space-y-3",children:t.configFiles.map((g,C)=>e.jsxs("div",{className:"border border-gray-100 rounded p-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Path"}),e.jsx("div",{className:"text-sm font-mono mt-1",children:g.path})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Content"}),e.jsx("pre",{className:"mt-1 p-2 bg-gray-50 rounded text-xs font-mono whitespace-pre-wrap",children:g.content})]})]},C))}):e.jsx("div",{className:"text-xs text-gray-500",children:"No configuration files defined"})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Features"}),t.features&&t.features.length>0?e.jsx("div",{className:"space-y-3",children:t.features.map((g,C)=>{var U;return e.jsx("div",{className:"border border-gray-100 rounded p-3",children:e.jsxs("div",{className:"flex items-start",children:[g.iconPath&&e.jsx("div",{className:"mr-3",children:e.jsx("img",{src:g.iconPath,alt:g.name,className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:g.name}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:g.description}),e.jsxs("div",{className:"mt-2 flex space-x-3",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${g.type==="required"?"bg-orange-50 text-orange-700":"bg-blue-50 text-blue-700"}`,children:g.type==="required"?"Required":"Optional"}),g.uiData&&e.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded",children:[g.uiData.component," component"]})]}),((U=g.uiData)==null?void 0:U.props)&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600 bg-gray-50 p-2 rounded",children:[e.jsx("div",{className:"font-medium mb-1",children:"Component Properties:"}),e.jsx("ul",{className:"list-disc pl-4 space-y-1",children:Object.entries(g.uiData.props).map(([v,q])=>e.jsxs("li",{children:[e.jsxs("span",{className:"font-medium",children:[v,":"]})," ",typeof q=="object"?JSON.stringify(q):String(q)]},v))})]})]})]})},C)})}):e.jsx("div",{className:"text-xs text-gray-500",children:"No features defined"})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Metadata"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Version"}),e.jsx("div",{className:"text-sm font-mono mt-1",children:((w=t.meta)==null?void 0:w.version)||"argon/unit:v3"})]}),((F=t.meta)==null?void 0:F.author)&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Author"}),e.jsx("div",{className:"text-sm mt-1",children:t.meta.author})]})]}),(((V=t.meta)==null?void 0:V.website)||((A=t.meta)==null?void 0:A.supportUrl))&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[((k=t.meta)==null?void 0:k.website)&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Website"}),e.jsx("a",{href:t.meta.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline mt-1 inline-block",children:t.meta.website})]}),((O=t.meta)==null?void 0:O.supportUrl)&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Support URL"}),e.jsx("a",{href:t.meta.supportUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline mt-1 inline-block",children:t.meta.supportUrl})]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Cargo Containers"}),e.jsx(X,{unitId:t.id,assignedContainers:c,onRefresh:()=>I(t.id)})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Install Script"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Docker Image"}),e.jsx("div",{className:"text-sm font-mono mt-1",children:t.installScript.dockerImage})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Entrypoint"}),e.jsx("div",{className:"text-sm font-mono mt-1",children:t.installScript.entrypoint})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Script"}),e.jsx("pre",{className:"mt-2 p-3 bg-gray-50 rounded-md text-xs font-mono overflow-auto",children:t.installScript.script})]})]})]}),t.createdAt&&t.updatedAt&&e.jsxs("div",{className:"pt-4 border-t border-gray-100 grid grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Created At"}),e.jsx("div",{className:"text-sm mt-1",children:new Date(t.createdAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Updated At"}),e.jsx("div",{className:"text-sm mt-1",children:new Date(t.updatedAt).toLocaleString()})]})]})]})]}):null};return f?e.jsx(te,{}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(ae,{}),e.jsxs("div",{className:"p-6",children:[n==="list"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Units"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"file",id:"importFile",className:"hidden",accept:".json",onChange:Y}),e.jsx("button",{onClick:()=>{var o;return(o=document.getElementById("importFile"))==null?void 0:o.click()},className:"px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Import Unit"}),e.jsx("button",{onClick:()=>{var o;return(o=document.getElementById("importEgg"))==null?void 0:o.click()},className:"px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Import Pterodactyl Egg"}),e.jsx("input",{type:"file",id:"importEgg",className:"hidden",accept:".json",onChange:Z}),e.jsx("button",{onClick:()=>s("create"),className:"px-3 py-2 text-xs font-medium text-white bg-gray-900 rounded-md hover:bg-gray-800",children:"Create Unit"})]})]}),e.jsxs("div",{className:"space-y-2",children:[m.map(o=>{var r;return e.jsx("div",{className:"bg-white border border-gray-200 rounded-md shadow-xs cursor-pointer hover:border-gray-300",onClick:()=>{d(o),s("view")},children:e.jsxs("div",{className:"px-6 h-20 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:o.name}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[o.shortName," • ",((r=o.meta)==null?void 0:r.version)==="argon/unit:v3"?e.jsxs(e.Fragment,{children:[o.dockerImages&&o.dockerImages.length>1?`${o.dockerImages.length} images`:o.dockerImage," • ",e.jsx("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-1 rounded-full text-xs",children:"Unit v3"})]}):o.dockerImage]})]}),e.jsxs("div",{className:"flex items-center",children:[o.features&&o.features.length>0&&e.jsxs("div",{className:"mr-3 px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded-full",children:[o.features.length," Features"]}),e.jsx(se,{className:"w-4 h-4 text-gray-400"})]})]})},o.id)}),m.length===0&&e.jsx("div",{className:"text-center py-6 bg-white rounded-md border border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-500",children:"No units found"})})]})]}),n==="create"&&M("create"),n==="edit"&&M("edit"),n==="view"&&K()]})]})};export{Fe as default};
