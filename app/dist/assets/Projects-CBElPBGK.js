import{u as M,r as d,j as e,L as q,P as k,b as z,c as U,T as B,C as X,X as O,R as D}from"./main-B1FWiW_Q.js";import{S as G}from"./server-D8snujjN.js";import{F as H}from"./folder-Dm7ZuZsp.js";const T=({isOpen:t,onClose:r,title:l,children:i,maxWidth:a="max-w-md"})=>{const c=D.useRef(null);return D.useEffect(()=>{const n=o=>{c.current&&!c.current.contains(o.target)&&r()},u=o=>{o.key==="Escape"&&r()};return t&&(document.addEventListener("mousedown",n),document.addEventListener("keydown",u),document.body.style.overflow="hidden"),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("keydown",u),document.body.style.overflow="auto"}},[t,r]),t?e.jsx("div",{className:"fixed inset-0 bg-gray-100 bg-opacity-50 z-50 flex items-center justify-center p-4 transition-opacity duration-200 ease-in-out animate-fade-in",children:e.jsxs("div",{ref:c,className:`bg-white rounded-lg shadow-xs w-full ${a} transform transition-all duration-200 ease-in-out animate-scale-in`,children:[e.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:l}),e.jsx("button",{onClick:r,className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors duration-150",children:e.jsx(O,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 py-4",children:i})]})}):null},E=({type:t,message:r,onDismiss:l})=>{const i=t==="error"?"bg-red-50":t==="success"?"bg-green-50":"bg-yellow-50",a=t==="error"?"text-red-600":t==="success"?"text-green-600":"text-yellow-600",c=t==="error"?"border-red-100":t==="success"?"border-green-100":"border-yellow-100";return e.jsxs("div",{className:`${i} border ${c} rounded-md flex items-start justify-between mb-4`,children:[e.jsxs("div",{className:"flex items-start p-3",children:[t==="error"||t==="warning"?e.jsx(B,{className:`w-4 h-4 ${a} mr-2 mt-0.5`}):e.jsx(X,{className:`w-4 h-4 ${a} mr-2 mt-0.5`}),e.jsx("p",{className:`text-xs ${a}`,children:r})]}),l&&e.jsx("button",{onClick:l,className:`p-2 ${a} hover:bg-opacity-10 cursor-pointer rounded-full`,children:e.jsx(O,{className:"w-4 h-4"})})]})},F=({isOpen:t,onClose:r,title:l,initialName:i,initialDescription:a,onSubmit:c,isSubmitting:n,error:u})=>{const[o,p]=d.useState(i),[h,v]=d.useState(a),[j,x]=d.useState(u||null);D.useEffect(()=>{p(i),v(a),x(u??null)},[i,a,u,t]);const w=g=>{if(g.preventDefault(),!o.trim()){x("Project name is required");return}c(o,h)};return e.jsxs(T,{isOpen:t,onClose:r,title:l,children:[j&&e.jsx(E,{type:"error",message:j,onDismiss:()=>x(null)}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Project Name"}),e.jsx("input",{type:"text",value:o,onChange:g=>p(g.target.value),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-gray-400",placeholder:"My Project",required:!0,autoFocus:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description (optional)"}),e.jsx("textarea",{value:h,onChange:g=>v(g.target.value),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-gray-400",placeholder:"Brief description of this project",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50 transition-colors duration-150",disabled:n,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n||!o.trim(),className:"px-4 py-2 text-xs font-medium text-white bg-gray-900 border border-transparent rounded-md hover:bg-gray-800 focus:outline-none transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Saving...":"Save"})]})]})]})},J=({isOpen:t,onClose:r,title:l,message:i,confirmText:a,onConfirm:c,isSubmitting:n})=>e.jsxs(T,{isOpen:t,onClose:r,title:l,children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-sm text-gray-600",children:i})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50 transition-colors duration-150",disabled:n,children:"Cancel"}),e.jsx("button",{type:"button",onClick:c,disabled:n,className:"px-4 py-2 text-xs font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none transition-colors duration-150 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Deleting...":a})]})]}),W=()=>{const{projects:t,loading:r,error:l,createProject:i,updateProject:a,deleteProject:c,fetchProjects:n}=M(),[u,o]=d.useState(!1),[p,h]=d.useState(!1),[v,j]=d.useState(!1),[x,w]=d.useState({id:"",name:"",description:""}),[g,$]=d.useState(""),[P,b]=d.useState(!1),[N,m]=d.useState(null),[S,f]=d.useState(null),I=async(s,C)=>{m(null);try{b(!0),await i(s,C),o(!1),f("Project created successfully"),setTimeout(()=>{f(null)},3e3)}catch(y){m(y instanceof Error?y.message:"Failed to create project")}finally{b(!1)}},L=async(s,C)=>{m(null);try{b(!0),await a(x.id,s,C),h(!1),f("Project updated successfully"),setTimeout(()=>{f(null)},3e3)}catch(y){m(y instanceof Error?y.message:"Failed to update project")}finally{b(!1)}},R=async()=>{try{b(!0),await c(g),j(!1),f("Project deleted successfully"),setTimeout(()=>{f(null)},3e3)}catch(s){console.error("Failed to delete project:",s),m(s instanceof Error?s.message:"Failed to delete project")}finally{b(!1)}},A=()=>{n()};return r?e.jsx(q,{}):l?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-red-600 text-sm",children:["Failed to load projects: ",l]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"w-full mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"Projects"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:A,className:"flex items-center px-4 py-2 text-xs font-medium text-gray-600 border border-gray-200 bg-white rounded-md hover:bg-gray-50 transition-colors duration-150",children:"Refresh"}),e.jsxs("button",{onClick:()=>{m(null),o(!0)},className:"flex items-center px-4 py-2 text-xs font-medium text-white bg-gray-900 rounded-md hover:bg-gray-800 transition-colors duration-150",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"New Project"]})]})]}),S&&e.jsx(E,{type:"success",message:S,onDismiss:()=>f(null)}),N&&e.jsx(E,{type:"error",message:N,onDismiss:()=>m(null)}),t.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(s=>e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden shadow-xs transition-shadow duration-200",children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 bg-indigo-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-lg font-semibold text-indigo-800",children:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[s.name,s.isDefault&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-100 text-indigo-800",children:"Default"})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.serverCount," server",s.serverCount!==1?"s":""]})]})]}),!s.isDefault&&e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>{w({id:s.id,name:s.name,description:s.description||""}),m(null),h(!0)},className:"p-1.5 text-gray-400 hover:text-gray-800 rounded-full hover:bg-gray-100 transition-colors duration-150",title:"Edit project",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{$(s.id),m(null),j(!0)},className:"p-1.5 text-gray-400 hover:text-red-600 rounded-full hover:bg-gray-100 transition-colors duration-150",title:"Delete project",children:e.jsx(U,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(G,{className:"h-4 w-4 mr-1.5 text-gray-400"}),e.jsxs("span",{children:[s.serverCount," server",s.serverCount!==1?"s":""]})]})})]})},s.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"w-32 h-32 mb-6",children:e.jsx(H,{className:"w-full h-full text-gray-300"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No projects yet"}),e.jsx("p",{className:"text-gray-500 text-center max-w-md mb-6",children:"Create your first project to organize your servers better"}),e.jsxs("button",{onClick:()=>{m(null),o(!0)},className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-gray-900 rounded-md hover:bg-gray-800 transition-colors duration-150",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Create First Project"]})]})]}),e.jsx(F,{isOpen:u,onClose:()=>o(!1),title:"Create New Project",initialName:"",initialDescription:"",onSubmit:I,isSubmitting:P,error:N}),e.jsx(F,{isOpen:p,onClose:()=>h(!1),title:"Edit Project",initialName:x.name,initialDescription:x.description,onSubmit:L,isSubmitting:P,error:N}),e.jsx(J,{isOpen:v,onClose:()=>j(!1),title:"Delete Project",message:"Are you sure you want to delete this project? All servers will be moved to the Default project.",confirmText:"Delete Project",onConfirm:R,isSubmitting:P})]})};export{W as default};
