import{f as D,r as j,j as e,L as X,b as G,c as R,P as Z}from"./main-B1FWiW_Q.js";import{z as l}from"./index-mSkvzYyn.js";import{A as K}from"./AdminBar-DckmZ1Fd.js";import{C as W}from"./chevron-right-BGfmBojJ.js";import{A as Y}from"./arrow-left-CnW3K88D.js";import{P as Q}from"./package-BGLRnfVM.js";var q={exports:{}};(function(p,v){(function(k,N){N()})(D,function(){function k(n,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}function N(n,d,f){var a=new XMLHttpRequest;a.open("GET",n),a.responseType="blob",a.onload=function(){t(a.response,d,f)},a.onerror=function(){console.error("could not download file")},a.send()}function g(n){var d=new XMLHttpRequest;d.open("HEAD",n,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function m(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(d)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof D=="object"&&D.global===D?D:void 0,o=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),t=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(n,d,f){var a=i.URL||i.webkitURL,x=document.createElement("a");d=d||n.name||"download",x.download=d,x.rel="noopener",typeof n=="string"?(x.href=n,x.origin===location.origin?m(x):g(x.href)?N(n,d,f):m(x,x.target="_blank")):(x.href=a.createObjectURL(n),setTimeout(function(){a.revokeObjectURL(x.href)},4e4),setTimeout(function(){m(x)},0))}:"msSaveOrOpenBlob"in navigator?function(n,d,f){if(d=d||n.name||"download",typeof n!="string")navigator.msSaveOrOpenBlob(k(n,f),d);else if(g(n))N(n,d,f);else{var a=document.createElement("a");a.href=n,a.target="_blank",setTimeout(function(){m(a)})}}:function(n,d,f,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),typeof n=="string")return N(n,d,f);var x=n.type==="application/octet-stream",E=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||x&&E||o)&&typeof FileReader<"u"){var u=new FileReader;u.onloadend=function(){var F=u.result;F=c?F:F.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=F:location=F,a=null},u.readAsDataURL(n)}else{var w=i.URL||i.webkitURL,I=w.createObjectURL(n);a?a.location=I:location.href=I,a=null,setTimeout(function(){w.revokeObjectURL(I)},4e4)}});i.saveAs=t.saveAs=t,p.exports=t})})(q);var ee=q.exports;const te=l.object({name:l.string().min(1),description:l.string().optional(),defaultValue:l.string(),required:l.boolean().default(!1),userViewable:l.boolean().default(!0),userEditable:l.boolean().default(!1),rules:l.string()}),se=l.object({path:l.string().min(1),content:l.string()}),ae=l.object({dockerImage:l.string(),entrypoint:l.string().default("bash"),script:l.string()}),P=l.object({id:l.string().optional(),name:l.string().min(1).max(100),shortName:l.string().min(1).max(20).regex(/^[a-z0-9-]+$/),description:l.string(),dockerImage:l.string(),defaultStartupCommand:l.string(),configFiles:l.array(se).default([]),environmentVariables:l.array(te).default([]),installScript:ae,startup:l.object({userEditable:l.boolean().default(!1)}).default({}),createdAt:l.date().optional(),updatedAt:l.date().optional()});l.object({id:l.string(),name:l.string(),description:l.string(),items:l.array(l.object({cargoId:l.string(),targetPath:l.string()})),createdAt:l.date().optional(),updatedAt:l.date().optional()});const re=({variables:p,onChange:v})=>{const k=()=>{v([...p,{name:"",description:"",defaultValue:"",required:!1,userViewable:!0,userEditable:!1,rules:"string"}])},N=m=>{v(p.filter((i,o)=>o!==m))},g=(m,i,o)=>{v(p.map((t,n)=>n===m?{...t,[i]:o}:t))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Environment Variables"}),e.jsx("button",{type:"button",onClick:k,className:"px-2 py-1 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Add Variable"})]}),p.map((m,i)=>e.jsx("div",{className:"border border-gray-200 rounded-md p-3 space-y-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"grow space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",value:m.name,onChange:o=>g(i,"name",o.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Variable Name"}),e.jsx("input",{type:"text",value:m.defaultValue,onChange:o=>g(i,"defaultValue",o.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Default Value"})]}),e.jsx("input",{type:"text",value:m.description||"",onChange:o=>g(i,"description",o.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Description (optional)"}),e.jsx("input",{type:"text",value:m.rules,onChange:o=>g(i,"rules",o.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Validation Rules (e.g., string|max:20)"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:m.required,onChange:o=>g(i,"required",o.target.checked),className:"text-xs"}),e.jsx("span",{className:"text-xs",children:"Required"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:m.userViewable,onChange:o=>g(i,"userViewable",o.target.checked),className:"text-xs"}),e.jsx("span",{className:"text-xs",children:"User Viewable"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:m.userEditable,onChange:o=>g(i,"userEditable",o.target.checked),className:"text-xs"}),e.jsx("span",{className:"text-xs",children:"User Editable"})]})]})]}),e.jsx("button",{type:"button",onClick:()=>N(i),className:"ml-2 p-1 text-gray-400 hover:text-red-500",children:e.jsx(R,{className:"w-4 h-4"})})]})},i)),p.length===0&&e.jsx("div",{className:"text-center py-4 border border-gray-200 border-dashed rounded-md",children:e.jsx("p",{className:"text-xs text-gray-500",children:"No variables defined"})})]})},ne=({files:p,onChange:v})=>{const k=()=>{v([...p,{path:"",content:""}])},N=m=>{v(p.filter((i,o)=>o!==m))},g=(m,i,o)=>{v(p.map((t,n)=>n===m?{...t,[i]:o}:t))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Configuration Files"}),e.jsx("button",{type:"button",onClick:k,className:"px-2 py-1 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Add File"})]}),p.map((m,i)=>e.jsx("div",{className:"border border-gray-200 rounded-md p-3 space-y-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"grow space-y-3",children:[e.jsx("input",{type:"text",value:m.path,onChange:o=>g(i,"path",o.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"File Path (e.g., server.properties)"}),e.jsx("textarea",{value:m.content,onChange:o=>g(i,"content",o.target.value),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md font-mono",placeholder:"File Content",rows:5})]}),e.jsx("button",{type:"button",onClick:()=>N(i),className:"ml-2 p-1 text-gray-400 hover:text-red-500",children:e.jsx(R,{className:"w-4 h-4"})})]})},i)),p.length===0&&e.jsx("div",{className:"text-center py-4 border border-gray-200 border-dashed rounded-md",children:e.jsx("p",{className:"text-xs text-gray-500",children:"No configuration files defined"})})]})},$=({unitId:p,assignedContainers:v,onRefresh:k})=>{const[N,g]=j.useState([]),[m,i]=j.useState(!1),[o,t]=j.useState(null),[n,d]=j.useState(!1);j.useEffect(()=>{n&&f()},[n]);const f=async()=>{if(p){i(!0);try{const c=localStorage.getItem("token"),u=await fetch("/api/cargo/container",{headers:{Authorization:`Bearer ${c}`}});if(!u.ok){if(u.status===404)return g([]),[];throw new Error("Failed to fetch containers")}const w=await u.json();g(w)}catch(c){t(c instanceof Error?c.message:"An error occurred")}finally{i(!1)}}},a=async c=>{if(p)try{const u=localStorage.getItem("token");if(!(await fetch(`/api/units/${p}/containers/${c}`,{method:"POST",headers:{Authorization:`Bearer ${u}`}})).ok)throw new Error("Failed to assign container");k(),d(!1)}catch(u){t(u instanceof Error?u.message:"Failed to assign container")}},x=async c=>{if(p)try{const u=localStorage.getItem("token");if(!(await fetch(`/api/units/${p}/containers/${c}`,{method:"DELETE",headers:{Authorization:`Bearer ${u}`}})).ok)throw new Error("Failed to remove container");k()}catch(u){t(u instanceof Error?u.message:"Failed to remove container")}},E=N.filter(c=>!v.some(u=>u.id===c.id));return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Cargo Containers"}),e.jsxs("button",{type:"button",onClick:()=>d(!n),className:"px-2 py-1 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50 flex items-center",children:[e.jsx(Z,{className:"w-3 h-3 mr-1"}),"Add Container"]})]}),o&&e.jsx("div",{className:"bg-red-50 text-red-600 p-2 rounded-md text-xs",children:o}),n&&e.jsxs("div",{className:"border border-gray-200 rounded-md p-3",children:[e.jsx("h4",{className:"text-xs font-medium mb-2",children:"Select a container to add"}),m?e.jsx("div",{className:"text-center py-4",children:e.jsx("span",{className:"text-xs text-gray-500",children:"Loading..."})}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:E.length>0?E.map(c=>e.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-gray-50 rounded-md border border-gray-100",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:c.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[c.items.length," items"]})]}),e.jsx("button",{onClick:()=>a(c.id),className:"px-2 py-1 text-xs text-gray-600 hover:bg-gray-100 rounded",children:"Add"})]},c.id)):e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-xs text-gray-500",children:"No available containers"})})}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsx("button",{onClick:()=>d(!1),className:"px-2 py-1 text-xs text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"})})]}),e.jsx("div",{children:v.length>0?e.jsx("div",{className:"space-y-2",children:v.map(c=>e.jsx("div",{className:"border border-gray-200 rounded-md p-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:c.name}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:c.description}),c.items&&c.items.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs font-medium text-gray-700 mb-1",children:"Items:"}),e.jsx("div",{className:"space-y-1 ml-2",children:c.items.map((u,w)=>e.jsxs("div",{className:"text-xs",children:["→ ",e.jsx("span",{className:"font-mono",children:u.targetPath})]},w))})]})]}),e.jsx("button",{onClick:()=>x(c.id),className:"text-gray-400 hover:text-red-500",children:e.jsx(R,{className:"w-4 h-4"})})]})},c.id))}):e.jsx("div",{className:"text-center py-4 border border-gray-200 border-dashed rounded-md",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(Q,{className:"w-5 h-5 text-gray-400 mb-1"}),e.jsx("p",{className:"text-xs text-gray-500",children:"No containers assigned"})]})})})]})},xe=()=>{const[p,v]=j.useState([]),[k,N]=j.useState(!0),[g,m]=j.useState(null),[i,o]=j.useState("list"),[t,n]=j.useState(null),[d,f]=j.useState([]),[a,x]=j.useState({name:"",shortName:"",description:"",dockerImage:"",defaultStartupCommand:"",configFiles:[],environmentVariables:[],installScript:{dockerImage:"",entrypoint:"bash",script:""},startup:{userEditable:!1}}),[E,c]=j.useState(null);console.log(g),j.useEffect(()=>{u()},[]);const u=async()=>{try{const s=localStorage.getItem("token"),r=await fetch("/api/units",{headers:{Authorization:`Bearer ${s}`}});if(!r.ok)throw new Error("Failed to fetch units");const h=await r.json();v(h),N(!1)}catch(s){m(s instanceof Error?s.message:"An error occurred"),N(!1)}},w=async s=>{try{const r=localStorage.getItem("token"),h=await fetch(`/api/units/${s}/containers`,{headers:{Authorization:`Bearer ${r}`}});if(!h.ok)throw new Error("Failed to fetch unit containers");const b=await h.json();f(b)}catch(r){console.error("Failed to fetch containers:",r),f([])}};j.useEffect(()=>{t!=null&&t.id&&(i==="view"||i==="edit")&&w(t.id)},[t,i]);const I=async s=>{s.preventDefault(),c(null);try{const r=P.omit({id:!0,createdAt:!0,updatedAt:!0}).parse(a),h=localStorage.getItem("token"),b=await fetch("/api/units",{method:"POST",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(!b.ok){const A=await b.json();throw new Error(A.error||"Failed to create unit")}await u(),o("list"),O()}catch(r){r instanceof l.ZodError?c("Invalid input. Please check your data."):c(r instanceof Error?r.message:"Failed to create unit")}},F=async s=>{if(s.preventDefault(),!!t){c(null);try{const r=P.partial().omit({id:!0,createdAt:!0,updatedAt:!0}).parse(a),h=localStorage.getItem("token"),b=await fetch(`/api/units/${t.id}`,{method:"PATCH",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(!b.ok){const A=await b.json();throw new Error(A.error||"Failed to update unit")}await u(),o("list"),O()}catch(r){r instanceof l.ZodError?c("Invalid input. Please check your data."):c(r instanceof Error?r.message:"Failed to update unit")}}},z=async s=>{try{const r=localStorage.getItem("token"),h=await fetch(`/api/units/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}});if(!h.ok){const b=await h.json();throw new Error(b.error||"Failed to delete unit")}await u(),(t==null?void 0:t.id)===s&&(o("list"),n(null))}catch(r){m(r instanceof Error?r.message:"Failed to delete unit")}},O=()=>{x({name:"",shortName:"",description:"",dockerImage:"",defaultStartupCommand:"",configFiles:[],environmentVariables:[],installScript:{dockerImage:"",entrypoint:"bash",script:""},startup:{userEditable:!1}}),n(null),f([])},M=s=>{const r={name:s.name,shortName:s.shortName,description:s.description,dockerImage:s.dockerImage,defaultStartupCommand:s.defaultStartupCommand,configFiles:s.configFiles,environmentVariables:s.environmentVariables,installScript:s.installScript,startup:s.startup},h=new Blob([JSON.stringify(r,null,2)],{type:"application/json"});ee.saveAs(h,`unit-${s.shortName}.json`)},_=async s=>{var b;if(!((b=s.target.files)!=null&&b.length))return;const r=s.target.files[0],h=new FileReader;h.onload=async A=>{var V;try{const S=(V=A.target)==null?void 0:V.result,y=JSON.parse(S),T=localStorage.getItem("token"),L=await fetch("/api/units",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify(y)});if(!L.ok){const U=await L.json();throw new Error(U.error||"Import failed")}await u(),o("list")}catch(S){m(S instanceof Error?S.message:"Failed to import unit")}},h.readAsText(r)},J=async s=>{var b;if(!((b=s.target.files)!=null&&b.length))return;const r=s.target.files[0],h=new FileReader;h.onload=async A=>{var V;try{const S=(V=A.target)==null?void 0:V.result;let y=JSON.parse(S);typeof y=="string"&&(y=y.replace("{{","%").replace("}}","%"),y=JSON.parse(y));const T={name:y.name,shortName:y.name.toLowerCase().replace(/[^a-z0-9-]/g,"-"),description:y.description,dockerImage:Object.values(y.docker_images)[0],defaultStartupCommand:y.startup,configFiles:[],environmentVariables:y.variables.map(C=>({name:C.env_variable,description:C.description,defaultValue:C.default_value,required:C.rules.includes("required"),userViewable:C.user_viewable,userEditable:C.user_editable,rules:C.rules})),installScript:{dockerImage:y.scripts.installation.container,entrypoint:y.scripts.installation.entrypoint,script:y.scripts.installation.script},startup:{userEditable:!0}},L=localStorage.getItem("token"),U=await fetch("/api/units",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${L}`},body:JSON.stringify(T)});if(!U.ok){const C=await U.json();throw new Error(C.error||"Import failed")}await u(),o("list")}catch(S){m(S instanceof Error?S.message:"Failed to import Pterodactyl egg")}},h.readAsText(r)},B=s=>e.jsxs("form",{onSubmit:s==="create"?I:F,className:"space-y-4 max-w-lg",children:[E&&e.jsx("div",{className:"bg-red-50 border border-red-100 rounded-md p-3",children:e.jsx("p",{className:"text-xs text-red-600",children:E})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",value:a.name,onChange:r=>x({...a,name:r.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Minecraft Java Server",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Short Name (lowercase, numbers, hyphens)"}),e.jsx("input",{type:"text",value:a.shortName,onChange:r=>x({...a,shortName:r.target.value.toLowerCase()}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"minecraft-java",pattern:"[a-z0-9-]+",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:r=>x({...a,description:r.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Detailed description of the unit...",rows:3,required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Docker Image"}),e.jsx("input",{type:"text",value:a.dockerImage,onChange:r=>x({...a,dockerImage:r.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"itzg/minecraft-server:java17",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Default Startup Command"}),e.jsx("input",{type:"text",value:a.defaultStartupCommand,onChange:r=>x({...a,defaultStartupCommand:r.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"java -Xms128M -Xmx{{SERVER_MEMORY}}M -jar server.jar",required:!0})]}),e.jsx(re,{variables:a.environmentVariables,onChange:r=>x({...a,environmentVariables:r})}),e.jsx(ne,{files:a.configFiles,onChange:r=>x({...a,configFiles:r})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Install Script Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",value:a.installScript.dockerImage,onChange:r=>x({...a,installScript:{...a.installScript,dockerImage:r.target.value}}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Install Docker Image",required:!0}),e.jsx("input",{type:"text",value:a.installScript.entrypoint,onChange:r=>x({...a,installScript:{...a.installScript,entrypoint:r.target.value}}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md",placeholder:"Entrypoint (default: bash)",defaultValue:"bash"})]}),e.jsx("textarea",{value:a.installScript.script,onChange:r=>x({...a,installScript:{...a.installScript,script:r.target.value}}),className:"mt-2 block w-full px-3 py-2 text-xs border border-gray-200 rounded-md font-mono",placeholder:"Install script commands...",rows:4,required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Startup Configuration"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:a.startup.userEditable,onChange:r=>x({...a,startup:{...a.startup,userEditable:r.target.checked}}),className:"text-xs"}),e.jsx("span",{className:"text-xs",children:"User Editable"})]})})]}),s==="edit"&&(t==null?void 0:t.id)&&e.jsx("div",{className:"pt-4 border-t border-gray-100",children:e.jsx($,{unitId:t.id,assignedContainers:d,onRefresh:()=>w(t.id)})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"submit",className:"px-3 py-2 text-xs font-medium text-white bg-gray-900 rounded-md hover:bg-gray-800",children:s==="create"?"Create Unit":"Update Unit"}),e.jsx("button",{type:"button",onClick:()=>{o(s==="edit"?"view":"list"),O()},className:"px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Cancel"})]})]}),H=()=>t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{o("list"),n(null)},className:"flex items-center text-gray-600 hover:bg-gray-100 p-2 cursor-pointer rounded-md transition hover:text-gray-900",children:e.jsx(Y,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.shortName})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>{x({name:t.name,shortName:t.shortName,description:t.description,dockerImage:t.dockerImage,defaultStartupCommand:t.defaultStartupCommand,configFiles:t.configFiles||[],environmentVariables:t.environmentVariables||[],installScript:t.installScript,startup:t.startup}),o("edit")},className:"flex items-center px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:[e.jsx(G,{className:"w-3.5 h-3.5 mr-1.5"}),"Edit"]}),e.jsxs("button",{onClick:()=>z(t.id),className:"flex items-center px-3 py-2 text-xs font-medium text-red-600 bg-white border border-gray-200 rounded-md hover:bg-red-50",children:[e.jsx(R,{className:"w-3.5 h-3.5 mr-1.5"}),"Delete"]}),e.jsx("button",{onClick:()=>M(t),className:"px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Export"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-md shadow-xs p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Description"}),e.jsx("div",{className:"text-sm mt-1",children:t.description})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Docker Configuration"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Image"}),e.jsx("div",{className:"text-sm font-mono mt-1",children:t.dockerImage})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Default Startup Command"}),e.jsx("div",{className:"text-sm font-mono mt-1 break-all",children:t.defaultStartupCommand})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Environment Variables"}),t.environmentVariables.length>0?e.jsx("div",{className:"space-y-3",children:t.environmentVariables.map((s,r)=>e.jsxs("div",{className:"border border-gray-100 rounded p-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Name"}),e.jsx("div",{className:"text-sm font-mono mt-1",children:s.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Default Value"}),e.jsx("div",{className:"text-sm font-mono mt-1",children:s.defaultValue})]})]}),s.description&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Description"}),e.jsx("div",{className:"text-sm mt-1",children:s.description})]}),e.jsxs("div",{className:"mt-2 flex space-x-4",children:[e.jsx("div",{className:"text-xs text-gray-500",children:s.required?"Required":"Optional"}),e.jsx("div",{className:"text-xs text-gray-500",children:s.userViewable?"User Viewable":"Hidden"}),e.jsx("div",{className:"text-xs text-gray-500",children:s.userEditable?"User Editable":"Locked"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Validation Rules"}),e.jsx("div",{className:"text-sm font-mono mt-1",children:s.rules})]})]},r))}):e.jsx("div",{className:"text-xs text-gray-500",children:"No environment variables defined"})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Configuration Files"}),t.configFiles.length>0?e.jsx("div",{className:"space-y-3",children:t.configFiles.map((s,r)=>e.jsxs("div",{className:"border border-gray-100 rounded p-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Path"}),e.jsx("div",{className:"text-sm font-mono mt-1",children:s.path})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Content"}),e.jsx("pre",{className:"mt-1 p-2 bg-gray-50 rounded text-xs font-mono whitespace-pre-wrap",children:s.content})]})]},r))}):e.jsx("div",{className:"text-xs text-gray-500",children:"No configuration files defined"})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Cargo Containers"}),e.jsx($,{unitId:t.id,assignedContainers:d,onRefresh:()=>w(t.id)})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Install Script"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Docker Image"}),e.jsx("div",{className:"text-sm font-mono mt-1",children:t.installScript.dockerImage})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Entrypoint"}),e.jsx("div",{className:"text-sm font-mono mt-1",children:t.installScript.entrypoint})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Script"}),e.jsx("pre",{className:"mt-2 p-3 bg-gray-50 rounded-md text-xs font-mono overflow-auto",children:t.installScript.script})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Startup Configuration"}),e.jsx("div",{className:"text-xs text-gray-500",children:t.startup.userEditable?"Users can modify startup command":"Startup command is locked"})]}),t.createdAt&&t.updatedAt&&e.jsxs("div",{className:"pt-4 border-t border-gray-100 grid grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Created At"}),e.jsx("div",{className:"text-sm mt-1",children:new Date(t.createdAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Updated At"}),e.jsx("div",{className:"text-sm mt-1",children:new Date(t.updatedAt).toLocaleString()})]})]})]})]}):null;return k?e.jsx(X,{}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(K,{}),e.jsxs("div",{className:"p-6",children:[i==="list"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Units"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"file",id:"importFile",className:"hidden",accept:".json",onChange:_}),e.jsx("button",{onClick:()=>{var s;return(s=document.getElementById("importFile"))==null?void 0:s.click()},className:"px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Import Unit"}),e.jsx("button",{onClick:()=>{var s;return(s=document.getElementById("importEgg"))==null?void 0:s.click()},className:"px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Import Pterodactyl Egg"}),e.jsx("input",{type:"file",id:"importEgg",className:"hidden",accept:".json",onChange:J}),e.jsx("button",{onClick:()=>o("create"),className:"px-3 py-2 text-xs font-medium text-white bg-gray-900 rounded-md hover:bg-gray-800",children:"Create Unit"})]})]}),e.jsxs("div",{className:"space-y-2",children:[p.map(s=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-md shadow-xs cursor-pointer hover:border-gray-300",onClick:()=>{n(s),o("view")},children:e.jsxs("div",{className:"px-6 h-20 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.shortName," • ",s.dockerImage]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(W,{className:"w-4 h-4 text-gray-400"})})]})},s.id)),p.length===0&&e.jsx("div",{className:"text-center py-6 bg-white rounded-md border border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-500",children:"No units found"})})]})]}),i==="create"&&B("create"),i==="edit"&&B("edit"),i==="view"&&H()]})]})};export{xe as default};
