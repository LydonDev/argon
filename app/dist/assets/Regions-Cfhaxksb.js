import{r as d,j as e,L as ne}from"./main-RYK7rxBo.js";import{P as ie,a as V,T as K}from"./trash-DrEENnvb.js";import{A as P}from"./arrow-left-CNmTBf0N.js";import{T as oe}from"./triangle-alert-zWRf1m5b.js";import{C as A}from"./chevron-down-C0Hh1nun.js";import{G as le}from"./globe-FV66cev7.js";const Q=({type:x,message:R,onDismiss:y})=>{const E=x==="error"?"bg-red-50":x==="success"?"bg-green-50":"bg-yellow-50",N=x==="error"?"text-red-600":x==="success"?"text-green-600":"text-yellow-600",p=x==="error"?"border-red-100":x==="success"?"border-green-100":"border-yellow-100";return e.jsxs("div",{className:`${E} border ${p} rounded-md flex items-start justify-between`,children:[e.jsxs("div",{className:"flex items-start p-2",children:[x==="error"||x==="warning"?e.jsx(oe,{className:`w-3 h-3 ${N} mr-2 mt-0.5`}):null,e.jsx("p",{className:`text-xs ${N}`,children:R})]}),y&&e.jsx("button",{onClick:y,className:`ml-2 mr-2 p-1 ${N} hover:bg-opacity-10 cursor-pointer rounded-full`,children:"Ã—"})]})},O=[{value:"",label:"None"},{value:"AF",label:"Afghanistan"},{value:"AU",label:"Australia"},{value:"BR",label:"Brazil"},{value:"CA",label:"Canada"},{value:"CN",label:"China"},{value:"DE",label:"Germany"},{value:"FR",label:"France"},{value:"GB",label:"United Kingdom"},{value:"IN",label:"India"},{value:"JP",label:"Japan"},{value:"NL",label:"Netherlands"},{value:"NO",label:"Norway"},{value:"RU",label:"Russia"},{value:"SE",label:"Sweden"},{value:"SG",label:"Singapore"},{value:"US",label:"United States"}],ue=()=>{const[x,R]=d.useState([]),[y,E]=d.useState([]),[N,p]=d.useState(!0),[W,$]=d.useState(null),[w,h]=d.useState("list"),[a,g]=d.useState(null),[k,L]=d.useState("overview"),[c,u]=d.useState({name:"",identifier:""}),[z,C]=d.useState(null),[B,D]=d.useState([]),[j,X]=d.useState("name"),[b,M]=d.useState("asc"),[U,G]=d.useState(!1),[I,J]=d.useState("");console.log(W),d.useEffect(()=>{f()},[]);const m=d.useCallback((r,s)=>{const t=Date.now().toString();return D(n=>[...n,{id:t,type:r,message:s}]),setTimeout(()=>{D(n=>n.filter(o=>o.id!==t))},5e3),t},[]),Y=d.useCallback(r=>{D(s=>s.filter(t=>t.id!==r))},[]),f=async()=>{try{p(!0);const s={Authorization:`Bearer ${localStorage.getItem("token")}`},[t,n]=await Promise.all([fetch("/api/regions",{headers:s}),fetch("/api/nodes",{headers:s})]);if(!t.ok){const l=await t.json();throw new Error(l.error||"Failed to fetch regions")}if(!n.ok){const l=await n.json();throw new Error(l.error||"Failed to fetch nodes")}const[o,i]=await Promise.all([t.json(),n.json()]),v=i.filter(l=>!l.regionId);if(E(v),R(o),a&&w==="view"){const l=o.find(T=>T.id===a.id);l&&g(l)}$(null)}catch(r){const s=r instanceof Error?r.message:"An error occurred";$(s),m("error",s)}finally{p(!1)}},F=async r=>{try{p(!0);const s=localStorage.getItem("token"),t=await fetch(`/api/regions/${r}`,{headers:{Authorization:`Bearer ${s}`}});if(!t.ok){const o=await t.json();throw new Error(o.error||"Failed to fetch region")}const n=await t.json();return R(o=>o.map(i=>i.id===r?n:i)),a&&a.id===r&&g(n),$(null),n}catch(s){const t=s instanceof Error?s.message:"An error occurred";return m("error",t),null}finally{p(!1)}},Z=async r=>{r.preventDefault(),C(null);try{const s=localStorage.getItem("token"),t=await fetch("/api/regions",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(c)}),n=await t.json();if(!t.ok){const o=Array.isArray(n.error)?n.error.map(i=>i.message).join(", "):n.error||"Failed to create region";throw new Error(o)}await f(),h("list"),u({name:"",identifier:""}),m("success",`Region "${c.name}" created successfully`)}catch(s){const t=s instanceof Error?s.message:"Failed to create region";C(t),m("error",t)}},_=async r=>{if(r.preventDefault(),!!a){C(null);try{const s=localStorage.getItem("token"),t=await fetch(`/api/regions/${a.id}`,{method:"PATCH",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(c)}),n=await t.json();if(!t.ok){const i=Array.isArray(n.error)?n.error.map(v=>v.message).join(", "):n.error||"Failed to update region";throw new Error(i)}await f(),m("success",`Region "${c.name}" updated successfully`);const o=await F(a.id);o&&g(o),h("view"),u({name:"",identifier:""})}catch(s){const t=s instanceof Error?s.message:"Failed to update region";C(t),m("error",t)}}},q=async r=>{try{const s=localStorage.getItem("token"),t=await fetch(`/api/regions/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to delete region")}await f(),(a==null?void 0:a.id)===r&&(h("list"),g(null)),m("success","Region deleted successfully")}catch(s){const t=s instanceof Error?s.message:"Failed to delete region";m("error",t)}},ee=async()=>{if(!(!a||!I))try{G(!0);const r=localStorage.getItem("token"),s=await fetch(`/api/nodes/${I}/region`,{method:"PATCH",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({regionId:a.id})});if(!s.ok){const n=await s.json();throw new Error(n.error||"Failed to assign node to region")}await f();const t=await F(a.id);t&&g(t),J(""),m("success","Node assigned to region successfully")}catch(r){const s=r instanceof Error?r.message:"Failed to assign node";m("error",s)}finally{G(!1)}},se=async r=>{try{const s=localStorage.getItem("token"),t=await fetch(`/api/nodes/${r}/region`,{method:"PATCH",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({regionId:null})});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to unassign node from region")}if(await f(),a){const n=await F(a.id);n&&g(n)}m("success","Node unassigned from region successfully")}catch(s){const t=s instanceof Error?s.message:"Failed to unassign node";m("error",t)}},S=r=>{j===r?M(s=>s==="asc"?"desc":"asc"):(X(r),M("asc"))},te=()=>[...x].sort((r,s)=>{var n,o;let t=0;switch(j){case"name":t=r.name.localeCompare(s.name);break;case"identifier":t=r.identifier.localeCompare(s.identifier);break;case"country":const i=r.countryId||"",v=s.countryId||"";t=i.localeCompare(v);break;case"nodes":t=r.nodes.length-s.nodes.length;break;case"servers":const l=((n=r.stats)==null?void 0:n.serverCount)||0,T=((o=s.stats)==null?void 0:o.serverCount)||0;t=l-T;break;default:t=0}return b==="asc"?t:-t}),H=r=>e.jsxs("form",{onSubmit:r==="create"?Z:_,className:"space-y-4 max-w-lg",children:[z&&e.jsx(Q,{type:"error",message:z,onDismiss:()=>C(null)}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",value:c.name,onChange:s=>u({...c,name:s.target.value}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md focus:outline-none focus:border-gray-400",placeholder:"Europe North",required:!0,maxLength:100}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"A descriptive name for this region"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Identifier"}),e.jsx("input",{type:"text",value:c.identifier,onChange:s=>u({...c,identifier:s.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md focus:outline-none focus:border-gray-400",placeholder:"eu-north",required:!0,pattern:"^[a-z0-9-]+$",maxLength:20}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"A unique lowercase identifier (a-z, 0-9, hyphens only)"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Country (Optional)"}),e.jsx("select",{value:c.countryId||"",onChange:s=>u({...c,countryId:s.target.value||void 0}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md focus:outline-none focus:border-gray-400",children:O.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The country where this region is located"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Fallback Region (Optional)"}),e.jsxs("select",{value:c.fallbackRegionId||"",onChange:s=>u({...c,fallbackRegionId:s.target.value||void 0}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md focus:outline-none focus:border-gray-400",children:[e.jsx("option",{value:"",children:"None"}),x.filter(s=>r==="create"||s.id!==(a==null?void 0:a.id)).map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Region to use if no nodes are available in this region"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Server Limit (Optional)"}),e.jsx("input",{type:"number",value:c.serverLimit||"",onChange:s=>u({...c,serverLimit:s.target.value?parseInt(s.target.value):void 0}),className:"block w-full px-3 py-2 text-xs border border-gray-200 rounded-md focus:outline-none focus:border-gray-400",min:0,placeholder:"No limit"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum number of servers allowed in this region"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"submit",className:"px-3 py-2 text-xs font-medium text-white bg-gray-900 rounded-md hover:bg-gray-800",children:r==="create"?"Create Region":"Update Region"}),e.jsx("button",{type:"button",onClick:()=>{h(r==="edit"?"view":"list"),r==="create"&&g(null),u({name:"",identifier:""})},className:"px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Cancel"})]})]}),re=()=>{var s,t,n,o;if(!a)return null;const r=((s=a.stats)==null?void 0:s.serverCount)||0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{h("list"),g(null)},className:"flex items-center text-gray-600 hover:bg-gray-100 p-2 cursor-pointer rounded-md transition hover:text-gray-900",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:a.name}),e.jsx("p",{className:"text-xs text-gray-500",children:a.identifier})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>{u({name:a.name,identifier:a.identifier,countryId:a.countryId||void 0,fallbackRegionId:a.fallbackRegionId||void 0,serverLimit:a.serverLimit||void 0}),h("edit")},className:"flex items-center px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:[e.jsx(V,{className:"w-3.5 h-3.5 mr-1.5"}),"Edit"]}),e.jsxs("button",{onClick:()=>q(a.id),className:"flex items-center px-3 py-2 text-xs font-medium text-red-600 bg-white border border-gray-200 rounded-md hover:bg-red-50",children:[e.jsx(K,{className:"w-3.5 h-3.5 mr-1.5"}),"Delete"]})]})]}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>L("overview"),className:`py-2 px-1 text-xs font-medium border-b-2 ${k==="overview"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Overview"}),e.jsxs("button",{onClick:()=>L("nodes"),className:`py-2 px-1 text-xs font-medium border-b-2 ${k==="nodes"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Nodes (",a.nodes.length,")"]}),e.jsxs("button",{onClick:()=>L("servers"),className:`py-2 px-1 text-xs font-medium border-b-2 ${k==="servers"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Servers (",r,")"]})]}),k==="overview"?e.jsx("div",{className:"bg-white border border-gray-200 rounded-md shadow-xs",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Region ID"}),e.jsx("div",{className:"text-sm font-mono mt-1",children:a.id})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Name"}),e.jsx("div",{className:"text-sm mt-1",children:a.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Identifier"}),e.jsx("div",{className:"text-sm mt-1",children:a.identifier})]}),a.countryId&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Country"}),e.jsx("div",{className:"text-sm mt-1",children:((t=O.find(i=>i.value===a.countryId))==null?void 0:t.label)||a.countryId})]}),a.fallbackRegionId&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Fallback Region"}),e.jsx("div",{className:"text-sm mt-1",children:((n=a.fallbackRegion)==null?void 0:n.name)||"Loading..."})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Server Limit"}),e.jsx("div",{className:"text-sm mt-1",children:a.serverLimit?a.serverLimit:"No limit"})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 mb-3",children:"Statistics"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Nodes"}),e.jsx("div",{className:"text-sm mt-1",children:a.nodes.length})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Online Nodes"}),e.jsx("div",{className:"text-sm mt-1",children:((o=a.stats)==null?void 0:o.onlineNodeCount)||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Servers"}),e.jsx("div",{className:"text-sm mt-1",children:r})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Created At"}),e.jsx("div",{className:"text-sm mt-1",children:new Date(a.createdAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Updated At"}),e.jsx("div",{className:"text-sm mt-1",children:new Date(a.updatedAt).toLocaleString()})]})]})})}):k==="nodes"?e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsx("div",{className:"col-span-2",children:e.jsx("div",{className:"bg-white border border-gray-200 rounded-md shadow-xs",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Nodes in Region"})}),e.jsx("div",{className:"space-y-2",children:a.nodes.length>0?a.nodes.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-md border border-gray-200 hover:border-gray-300",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${i.isOnline?"bg-green-400":"bg-gray-300"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-900",children:i.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[i.fqdn,":",i.port]})]})]}),e.jsx("button",{onClick:()=>se(i.id),className:"px-2 py-1 text-xs font-medium text-red-600 bg-white border border-gray-200 rounded-md hover:bg-red-50",children:"Unassign"})]},i.id)):e.jsx("div",{className:"py-6 text-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No nodes in this region"})})})]})})}),e.jsx("div",{children:e.jsx("div",{className:"bg-white border border-gray-200 rounded-md shadow-xs",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Assign Node to Region"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add an existing node to this region."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Node"}),e.jsxs("select",{value:I,onChange:i=>J(i.target.value),className:"mt-1 block w-full px-3 py-2 text-xs border border-gray-200 rounded-md focus:outline-none focus:border-gray-400",disabled:y.length===0,children:[e.jsx("option",{value:"",children:"Select a node"}),y.map(i=>e.jsxs("option",{value:i.id,children:[i.name," (",i.fqdn,")"]},i.id))]}),y.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No unassigned nodes available"})]}),e.jsx("button",{onClick:ee,disabled:!I||U||y.length===0,className:"w-full px-3 py-2 text-xs font-medium text-white bg-gray-900 rounded-md hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:U?"Assigning...":"Assign Node"})]})]})})})})]}):e.jsx("div",{className:"bg-white border border-gray-200 rounded-md shadow-xs",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Servers in Region"})}),r>0?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["There are ",r," servers running across ",a.nodes.length," nodes in this region."]}),e.jsx("div",{className:"py-4 text-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Visit the Servers page to see more details about individual servers."})})]}):e.jsx("div",{className:"py-6 text-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No servers in this region"})})]})})]})},ae=()=>{const r=te();return e.jsx("div",{className:"overflow-x-auto rounded-lg",children:e.jsxs("table",{className:"min-w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-transparent",children:[e.jsx("th",{className:"p-3 text-left text-xs font-medium text-gray-600 tracking-wider cursor-pointer",onClick:()=>S("name"),children:e.jsxs("div",{className:"flex items-center",children:["Name",j==="name"&&e.jsx(A,{className:`w-4 h-4 ml-1 ${b==="desc"?"transform rotate-180":""}`})]})}),e.jsx("th",{className:"p-3 text-left text-xs font-medium text-gray-600 tracking-wider cursor-pointer",onClick:()=>S("identifier"),children:e.jsxs("div",{className:"flex items-center",children:["Identifier",j==="identifier"&&e.jsx(A,{className:`w-4 h-4 ml-1 ${b==="desc"?"transform rotate-180":""}`})]})}),e.jsx("th",{className:"p-3 text-left text-xs font-medium text-gray-600 tracking-wider cursor-pointer",onClick:()=>S("country"),children:e.jsxs("div",{className:"flex items-center",children:["Country",j==="country"&&e.jsx(A,{className:`w-4 h-4 ml-1 ${b==="desc"?"transform rotate-180":""}`})]})}),e.jsx("th",{className:"p-3 text-left text-xs font-medium text-gray-600 tracking-wider cursor-pointer",onClick:()=>S("nodes"),children:e.jsxs("div",{className:"flex items-center",children:["Nodes",j==="nodes"&&e.jsx(A,{className:`w-4 h-4 ml-1 ${b==="desc"?"transform rotate-180":""}`})]})}),e.jsx("th",{className:"p-3 text-left text-xs font-medium text-gray-600 tracking-wider cursor-pointer",onClick:()=>S("servers"),children:e.jsxs("div",{className:"flex items-center",children:["Servers",j==="servers"&&e.jsx(A,{className:`w-4 h-4 ml-1 ${b==="desc"?"transform rotate-180":""}`})]})}),e.jsx("th",{className:"p-3 text-right text-xs font-medium text-gray-600 tracking-wider",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200 bg-white",children:[r.map(s=>{var n,o,i,v;const t=((n=O.find(l=>l.value===s.countryId))==null?void 0:n.label)||s.countryId||"-";return e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>{g(s),h("view")},children:[e.jsx("td",{className:"p-3 text-xs text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(le,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"font-medium",children:s.name})]})}),e.jsx("td",{className:"p-3 text-xs text-gray-500",children:s.identifier}),e.jsx("td",{className:"p-3 text-xs text-gray-500",children:t}),e.jsxs("td",{className:"p-3 text-xs text-gray-500",children:[s.nodes.length," ",s.nodes.length===1?"node":"nodes",e.jsxs("span",{className:"text-gray-400 ml-1",children:["(",((o=s.stats)==null?void 0:o.onlineNodeCount)||0," online)"]})]}),e.jsxs("td",{className:"p-3 text-xs text-gray-500",children:[((i=s.stats)==null?void 0:i.serverCount)||0," ",(((v=s.stats)==null?void 0:v.serverCount)||0)===1?"server":"servers",s.serverLimit&&e.jsxs("span",{className:"text-gray-400 ml-1",children:["/ ",s.serverLimit]})]}),e.jsx("td",{className:"p-3 text-right whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",onClick:l=>l.stopPropagation(),children:[e.jsx("button",{onClick:l=>{l.stopPropagation(),u({name:s.name,identifier:s.identifier,countryId:s.countryId||void 0,fallbackRegionId:s.fallbackRegionId||void 0,serverLimit:s.serverLimit||void 0}),g(s),h("edit")},className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx("button",{onClick:l=>{l.stopPropagation(),q(s.id)},className:"p-1 text-gray-400 hover:text-red-600",children:e.jsx(K,{className:"w-4 h-4"})})]})})]},s.id)}),x.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-4 text-center text-gray-500 text-xs",children:"No regions found"})})]})]})})};return N&&x.length===0?e.jsx("div",{className:"min-h-screen",children:e.jsx("div",{className:"p-6 flex items-center justify-center h-64",children:e.jsx(ne,{})})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"p-6",children:[B.length>0&&e.jsx("div",{className:"mb-4 space-y-2",children:B.map(r=>e.jsx(Q,{type:r.type,message:r.message,onDismiss:()=>Y(r.id)},r.id))}),e.jsxs("div",{className:"transition-all duration-200 ease-in-out",children:[w==="list"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Regions"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Group your nodes into regions for better organization and load balancing."})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:f,className:"flex items-center px-3 py-2 text-xs font-medium text-gray-600 bg-white border border-gray-200 rounded-md hover:bg-gray-50",children:"Refresh"}),e.jsxs("button",{onClick:()=>h("create"),className:"flex items-center px-3 py-2 text-xs font-medium text-white bg-gray-900 rounded-md hover:bg-gray-800",children:[e.jsx(ie,{className:"w-3.5 h-3.5 mr-1.5"}),"Create Region"]})]})]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-md shadow-xs",children:ae()})]}),w==="create"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{h("list"),g(null)},className:"flex items-center text-gray-600 hover:bg-gray-100 p-2 cursor-pointer rounded-md transition hover:text-gray-900",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Create Region"})})]}),H("create")]}),w==="edit"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{h("view"),u({name:"",identifier:""})},className:"flex items-center text-gray-600 hover:bg-gray-100 p-2 cursor-pointer rounded-md transition hover:text-gray-900",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Edit Region"})})]}),H("edit")]}),w==="view"&&re()]})]})})};export{ue as default};
